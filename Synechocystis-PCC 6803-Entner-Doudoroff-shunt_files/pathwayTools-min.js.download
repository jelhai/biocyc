'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b,c){if(!c||null!=a){c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]}};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var g=0;g<e.length-1;g++){var f=e[g];if(!(f in d))return;d=d[f]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&(c=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+c+"$"+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};
$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if("number"==typeof a.length)return $jscomp.arrayIterator(a);throw Error(String(a)+" is not an iterable or ArrayLike");};$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var c=a.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(c.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(c){return{value:c,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(g){return this.context_.yieldAllIterator_=null,this.context_.throw_(g),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&a.prototype&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function g(f){f.done?d(f.value):Promise.resolve(f.value).then(b,c).then(g,e)}g(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
var ptoolsJsVersion="27.0",ol_width=300,ol_fgclass="overlibFGClass";YAHOO.namespace("ptools");function ajaxUpdater(a,b,c){c||(c={});c.success=function(e){d.html(e)};let d=$j("#"+a);$j.ajax(b,c)}[].indexOf||(Array.prototype.indexOf=function(a,b){for(b=b||0;b<this.length;b++)if(this[b]==a)return b});var filesAdded=[];
function loadJS(a){if(!filesAdded.includes(a)){var b=document.createElement("script");b.src=a;b.type="text/javascript";document.getElementsByTagName("head")[0].append(b);filesAdded.push(a)}}function loadCSS(a){if(!filesAdded.includes(a)){var b=document.createElement("link");b.href=a;b.type="text/css";b.rel="stylesheet";document.getElementsByTagName("head")[0].append(b);filesAdded.push(a)}}
function getUrlParameter(a){var b=window.location.search.substring(1).split("&"),c;for(c=0;c<b.length;c++){var d=b[c].split("=");if(d[0]===a)return void 0===d[1]?!0:decodeURIComponent(d[1])}}function get_cookie(a){return(a=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)"))?unescape(a[2]).trim():null}
function set_cookie(a,b,c,d,e,g){a=a+"="+escape(b.trim());c&&(a+="; expires="+c.toGMTString());a=d?a+("; path= "+escape(d)):a+"; path= /";e&&(a+="; domain= "+escape(e));g&&(a+="; secure");document.cookie=a}function getElementsByClassNameNode(a,b){b||(b=document.getElementsByTagName("body")[0]);var c=[];if(b){a=new RegExp("\\b"+a+"\\b");b=b.getElementsByTagName("*");for(var d=0;d<b.length;d++)b[d].className&&a.test(b[d].className)&&c.push(b[d])}return c}
function orgID(){var a=orgIDFromURL()||orgIDFromHostname()||basedOnforceOrgID()||getWindowOrgID()||get_cookie("recentOrgID0");return null!=a&&""!=a&&orgIDtoOrgStructure(a)?a:void 0!=window.preferred_database&&null!=preferred_database&&"none"!=preferred_database&&""!=preferred_database?preferred_database:defaultServerOrgID}
function orgIDFromURL(){for(var a=location.pathname.split("/"),b=0;b<a.length-1;b++){var c="string"==typeof a[b]?a[b].toUpperCase():"";if(c&&"OVERVIEWSWEB"!=c&&"DASHBOARD"!=c){if("METACYC"==c)return"META";if("ECOCYC"==c)return"ECOLI";if("HUMANCYC"==c)return"HUMAN";if("BSUBCYC"==c)return"BSUB";if(orgNameFromOrgID(c))return c}}if(1<location.search.length){a=location.search.slice(1).split("&");for(b=0;b<a.length;b++)if(c=a[b],0==c.search("orgid=")&&(c=c.slice(6).toUpperCase(),orgNameFromOrgID(c)))return c;
for(b=0;b<a.length;b++)if(c=a[b],0==c.search("object=")&&(c=c.slice(7).toUpperCase(),orgNameFromOrgID(c)))return c}return!1}function orgIDFromHostname(){return!1}function sriOrgDomain(){var a=location.hostname.split(".");return 2<=a.length&&(a=a[a.length-2].toUpperCase(),"SRI"==a||a.match(/^METACYC/)||a.match(/^ECOCYC/)||a.match(/^HUMANCYC/)||a.match(/^BSUBCYC/)||a.match(/^BIOCYC/)||a.match(/^CYANOCYC/))?!0:!1}
function orgIDtoSiteName(a){return"META"==a.toUpperCase()?"metacyc":"ECOLI"==a.toUpperCase()?"ecocyc":"HUMAN"==a.toUpperCase()?"humancyc":""}var forceOrgID;function bannerOrgID(){return forceOrgID||orgID()}function basedOnforceOrgID(){if(forceOrgID&&"DEFAULT"!=forceOrgID&&orgIDtoOrgStructure(forceOrgID))return forceOrgID}function getOrgFullName(a){return orgNameFromOrgID(a)}const specialOrgs="MTBH37RV HPY PDIF272563 PAER208964 SENT99287 SHIGELLA 10403S_RAST VCHO".split(" ");
function getSpecialOrgBinomial(a){return specialOrgs.includes(a)?(a=getOrgFullName(a).split(RegExp(" ")),a[0]+" "+a[1]):null}var orgNameAssociativeArray=null,orgIdAssociativeArray=null;function buildOrgAssociativeArrays(){orgNameAssociativeArray=[];orgIdAssociativeArray=[];for(var a=0;a<allOrganisms.length;a++){var b=allOrganisms[a];"ECOLI"!=b.id||0<=b.label.search("EcoCyc")||(b.label+=" (EcoCyc)");orgNameAssociativeArray[b.label]=b;orgIdAssociativeArray[b.id]=b}}
function orgIDtoOrgStructure(a){if(a){orgIdAssociativeArray||buildOrgAssociativeArrays();var b=orgIdAssociativeArray[a];if(b||allOrganismsLoaded)return b;loadAllOrganismsAsync();return orgIdAssociativeArray[a]}}function orgNameFromOrgID(a){return(a=orgIDtoOrgStructure(a))?a.label:""}function orgIDFromOrgName(a){orgNameAssociativeArray||buildOrgAssociativeArrays();if(a=orgNameAssociativeArray[a])return a.id}
function isMultiOrgPGDB(){var a=orgIDtoOrgStructure(orgID());return null==a?!1:"multi"==a.genomeType}function isPanGenomePGDB(){var a=orgIDtoOrgStructure(orgID());return null==a?!1:"pangenome"==a.genomeType}function isOrgidCelOverview(a){a=orgIDtoOrgStructure(a);return null==a?!0:!0===a.cellov}function isOrgidRegOverview(a){a=orgIDtoOrgStructure(a);return null==a?!1:!0===a.regOv}function isOrgidGenOverview(a){a=orgIDtoOrgStructure(a);return null==a?!1:!0===a.genOv}
function isOrgidGenBrowser(a){a=orgIDtoOrgStructure(a);return null==a?!1:!0===a.genBrowser}
function adjustMenuItemsOrgID(a){findAllElements("a.orgspecific").forEach(l=>updateOrgSpecificMenuItem(l));var b=YAHOO.widget.MenuManager.getMenuItem("regOVMenuItem");b&&b.cfg.setProperty("disabled",!isOrgidRegOverview(a));(b=YAHOO.widget.MenuManager.getMenuItem("genomeBrowserMenuItem"))&&b.cfg.setProperty("disabled",!isOrgidGenBrowser(a));(b=YAHOO.widget.MenuManager.getMenuItem("genomePosterMenuItem"))&&b.cfg.setProperty("disabled",!isOrgidGenBrowser(a));(b=YAHOO.widget.MenuManager.getMenuItem("genOVMenuItem"))&&
b.cfg.setProperty("disabled",!isOrgidGenOverview(a));b=YAHOO.widget.MenuManager.getMenuItem("cellOVMenuItem");var c=YAHOO.widget.MenuManager.getMenuItem("cellOVPosterMenuItem"),d=YAHOO.widget.MenuManager.getMenuItem("omicsMenuItem"),e=YAHOO.widget.MenuManager.getMenuItem("pwyEvMenuItem"),g=YAHOO.widget.MenuManager.getMenuItem("pwyEvScoreMenuItem"),f=YAHOO.widget.MenuManager.getMenuItem("pwyHolesMenuItem"),h=YAHOO.widget.MenuManager.getMenuItem("blastMenuItem"),k=YAHOO.widget.MenuManager.getMenuItem("metEngMenuItem");
isMultiOrgPGDB()?(b&&b.cfg.setProperty("disabled",!0),c&&c.cfg.setProperty("disabled",!0),d&&d.cfg.setProperty("disabled",!0),e&&e.cfg.setProperty("disabled",!0),g&&g.cfg.setProperty("disabled",!0),f&&f.cfg.setProperty("disabled",!0),k&&k.cfg.setProperty("disabled",!0),$j(".disable_for_multiorg").addClass("removedLink")):(b&&b.cfg.setProperty("disabled",!isOrgidCelOverview(a)),c&&c.cfg.setProperty("disabled",!isOrgidCelOverview(a)),d&&d.cfg.setProperty("disabled",!1),e&&e.cfg.setProperty("disabled",
!1),g&&g.cfg.setProperty("disabled",!1),f&&f.cfg.setProperty("disabled",!1),h&&h.cfg.setProperty("disabled",!1),k&&k.cfg.setProperty("disabled",!1),$j(".disable_for_multiorg").removeClass("removedLink"));userInfo||$j(".toolbar-dropdown-content a.requiresLogin").addClass("removedLink");"ECOLI"==a&&(e&&e.cfg.setProperty("disabled",!0),g&&g.cfg.setProperty("disabled",!0),f&&f.cfg.setProperty("disabled",!0))}
function updateOrgSpecificMenuItem(a){a=$j(a);var b=a.hasClass("orgspecificReplaced")?a.prop("origHref"):a.prop("href"),c=b.replace("%5BORGID%5D",orgID());c=c.replace("[ORGID]",orgID());a.prop("origHref",b).prop("href",c);a.removeClass("orgspecific").addClass("orgspecificReplaced")}function updateAllOrgSpecificMenuItems(){$j("a.orgspecific,a.orgspecificReplaced").each(function(a,b){updateOrgSpecificMenuItem(b)})}
function updateOrgName(a){var b=findAllElements(".dynDBName"),c="/"+a+"/organism-summary";if(b)for(var d=0;d<b.length;d++)b[d].innerHTML=getOrgFullName(a),b[d].href=c;adjustMenuItemsOrgID(a);userAdjustMenuItemsOrgID(a);"META"==a?hideHomePageToolShortcuts():showHomePageToolShortcuts()}function hideHomePageToolShortcuts(){var a=findElement("#genBroQuickAccess"),b=findElement("#celOvQuickAccess"),c=findElement("#omicsDashQuickAccess");null!=a&&a.hide();null!=b&&b.hide();null!=c&&c.hide()}
function showHomePageToolShortcuts(){var a=findElement("#genBroQuickAccess"),b=findElement("#celOvQuickAccess"),c=findElement("#omicsDashQuickAccess");null!=a&&a.show();null!=b&&b.show();null!=c&&c.show()}function updateBannerClass(a){var b=document.getElementsByTagName("body")[0];YAHOO.util.Dom.addClass(b,a)}
function get_browser_window_size(){var a=Array(2),b=100,c=100;-1!=navigator.appName.indexOf("Microsoft")&&document.documentElement?(c=document.documentElement.offsetHeight,b=document.documentElement.offsetWidth):-1!=navigator.appName.indexOf("Microsoft")&&document.body?(c=document.body.offsetHeight,b=document.body.offsetWidth):self.innerWidth?(b=self.innerWidth,c=self.innerHeight):document.documentElement&&document.documentElement.clientWidth?(b=document.documentElement.clientWidth,c=document.documentElement.clientHeight):
document.body?(b=document.body.clientWidth,c=document.body.clientHeight):alert("Cannot find frame window height and width");var d=document.getElementById("ptbanner"),e=d&&document.defaultView?document.defaultView.getComputedStyle(d,null):!1;d=e?parseInt(e.getPropertyValue("height")):d&&d.currentStyle?parseInt(d.currentStyle.height):0;var g=(e=document.getElementById("topBannerMenu")||document.getElementById("pathwayToolsMenubar"))&&document.defaultView?document.defaultView.getComputedStyle(e,null):
!1;e=g?parseInt(g.getPropertyValue("height")):e&&e.currentStyle?parseInt(e.currentStyle.height):0;a[0]=Math.round(b);a[1]=Math.round(c-(0<d?d:0)-(0<e?e:0));return a}function set_cookie_frame_dimension(){var a=get_browser_window_size(),b=new Date;b.setTime(b.getTime()+864E5);document.cookie="frameWidth="+a[0]+"; expires ="+b+"; path=/";document.cookie="frameHeight="+a[1]+"; expires ="+b+"; path=/"}function qsSubmitFn(){document.getElementById("qsform").submit()}
function initOnWindowLoad(){try{window.onresize=function(){set_cookie_frame_dimension()},userDefinedBeforePathwayToolsInit(),pathwayToolsInit(),userDefinedAfterPathwayToolsInit()}catch(a){alert(a)}}
function pathwayToolsInit(){buildOrgAssociativeArrays();var a=orgID();updateOrgName(a);updateBannerClass(bannerOrgID());getWindowOrgArray();var b=getWindowOrgID();b&&b==a||setWindowOrgID(a);get_cookie("recentOrgID0")!=a&&setRecentlyUsedCookie(a);allOrganismsLoaded&&1==allOrganisms.length&&cvtBannerToSingleOrg();void 0!=window.initLogin&&initLogin();set_cookie_frame_dimension();void 0!=window.dataSetsFreeForm&&0!=window.dataSetsFreeForm.length&&initSAQP();void 0!=window.SetPreviousValues&&SetPreviousValues();
void 0!=window.tabberAutomatic&&tabberAutomatic();void 0!=window.insertTemporaryMessage&&insertTemporaryMessage();insertRandomSelections();a=findElement(".initialFocusElt");!a&&document.getElementById("mainContent")||$j(".skipLink").css("display","none");null==a||a.focus();SVGInit();addTooltips();addLinkFrameidContextMenus()}function userDefinedBeforePathwayToolsInit(){}function userDefinedAfterPathwayToolsInit(){}function userAdjustMenuItemsOrgID(a){}
function obfuscate(a,b,c,d){document.write('<a href="mailto:'+b+"@"+a+c+'">');""==d?document.write(b+"@"+a):document.write(d);document.write("</a>")}function insertRandomSelections(){for(var a=getElementsByClassNameNode("randomDiv",null),b=0;b<a.length;b++)applyRandomSelection(a[b])}
function applyRandomSelection(a){if(a){for(var b=a.childNodes,c=null==b?0:b.length,d=0;d<c;d++)(a=b[d])&&a.style&&(a.style.width="0",a.style.display="none");a=[];for(d=0;d<c;d++){var e=b[d];e.innerHTML&&0<=e.innerHTML.search("[^ \n\t]")&&a.push(e)}b=a.length;0<b&&(c=(new Date).getSeconds(),b=Math.floor(Math.random(c)*b),a[b].style&&(a[b].style.width="100%",a[b].style.display="block"))}}document.addEventListener("DOMContentLoaded",initOnWindowLoad);
function expandAddToSTWidget(a){$j("#"+a).parent().empty().append($j("#add_to_group").show());$j("select[name='group']").attr("aria-label","Add to SmartTable")}var selectedOrgID,orgSelectorAC;
function searchNamesAndTags(a,b,c){function d(f){return f.replace(/[^\w\s]|_/g,"")}let e=[],g;if(0<a.length||1E3>=b.length)for($j(c).prop("placeholder",""),a=decodeURIComponent(a).toLowerCase(),1<a.length&&"^"==a[0]?(queryWords=[a],g=new RegExp(a,"i")):(a="\\b"+d(a).split(" ").join(".*\\b"),g=new RegExp(a,"i")),a=0,c=b.length;a<c;a++){let f=b[a];if(g.test(d(f.label)))e.push({org:f,name:f.label});else if(f.synonyms){let h=f.synonyms.find(k=>g.test(d(k)));h&&e.push({org:f,name:h})}}else $j(c).prop("placeholder",
"Start typing a genus, species and/or strain name");e.sort(caseInsensitiveSortByNameFn);return e}function caseInsensitiveSortFn(a,b){a=a.toLowerCase();b=b.toLowerCase();return a<b?-1:a>b?1:0}function caseInsensitiveSortByNameFn(a,b){a=a.name.toLowerCase();b=b.name.toLowerCase();return a<b?-1:a>b?1:0}
function setFilterOptions(a){for(var b=a.length-1;0<=b;b--)a.remove(b);b=allOrganisms.length;let c=filteredOrganisms(allOrganisms,"1").length,d=filteredOrganisms(allOrganisms,"2").length,e=filteredOrganisms(allOrganisms,"3").length,g=filteredOrganisms(allOrganisms,"REFERENCE").length,f=filteredOrganisms(allOrganisms,"REPRESENTATIVE").length,h=filteredOrganisms(allOrganisms,"pangenome").length,k=filteredOrganisms(allOrganisms,"BACTERIA").length,l=filteredOrganisms(allOrganisms,"ARCHAEA").length,m=
filteredOrganisms(allOrganisms,"EUKARYOTA").length;a.options[0]=createOption("All ("+b+")",null);a.options[0].selected=!0;0<g&&g<b&&(a.options[a.length]=createOption("NCBI Reference Genomes ("+g+")","REFERENCE","Organisms that have been designated by NCBI as reference genomes"));0<f&&f<b&&(a.options[a.length]=createOption("NCBI Representative Genomes ("+f+")","REPRESENTATIVE","Organisms that have been designated by NCBI as representative genomes"));0<f&&0<g&&f+g<b&&(a.options[a.length]=createOption("NCBI Reference & Representative Genomes ("+
(g+f)+")","refOrRep","Organisms that have been designated by NCBI as reference or representative genomes"));0<h&&h<b&&(a.options[a.length]=createOption("PanGenome ("+h+")","pangenome"));0<c&&c<b&&(a.options[a.length]=createOption("Tier 1 ("+c+")","1","Tier 1 databases have undergone the highest level of manual curation"));0<d&&d<b&&(a.options[a.length]=createOption("Tier 2 ("+d+")","2","Tier 2 databases have received a limited amount of manual curation"));0<c&&0<d&&c+d<b&&(a.options[a.length]=createOption("Tiers 1 & 2 ("+
(c+d)+")","tier1or2","All databases that have received some level of manual curation"));0<e&&e<b&&(a.options[a.length]=createOption("Tier 3 ("+e+")","3","Tier 3 databases are generated entirely computationally and have received no manual curation"));0<k&&k<b&&(a.options[a.length]=createOption("Bacteria ("+k+")","BACTERIA"));0<l&&l<b&&(a.options[a.length]=createOption("Archaea ("+l+")","ARCHAEA"));0<m&&m<b&&(a.options[a.length]=createOption("Eukaryota ("+m+")","EUKARYOTA"));2>a.length&&(a.parentElement.style.display=
"none")}function getOrgFilter(a){a||(a="orgFilter");a=document.getElementById(a);return a[a.selectedIndex].value}function setOrgFilter(a){a?$j("#orgFilter").val(a):$j("#orgFilter")[0].selectedIndex=0;updateOrgFilter()}
function filteredOrganisms(a,b){b||(b=getOrgFilter());switch(b){case "1":case "2":case "3":var c=function(d){return d.tier==b};break;case "tier1or2":c=function(d){return 1==d.tier||2==d.tier};break;case "pangenome":case "REFERENCE":case "REPRESENTATIVE":c=function(d){return d.genomeType==b};break;case "refOrRep":c=function(d){return"REFERENCE"==d.genomeType||"REPRESENTATIVE"==d.genomeType};break;case "BACTERIA":case "ARCHAEA":case "EUKARYOTA":c=function(d){return d.domain==b}}return c?allOrganisms.filter(c):
allOrganisms}
function organismSelectorAC(a,b,c,d,e){var g=$j("#"+a),f=g.prop("placeholder"),h=new YAHOO.util.FunctionDataSource(function(l){return searchNamesAndTags(l,filteredOrganisms(allOrganisms),YAHOO.util.Dom.get(a))});h.responseSchema={fields:["org","name"]};var k=new YAHOO.widget.AutoComplete(a,b,h);k.alwaysShowContainer=e?!1:!0;k.animVert=!1;k.autoHighlight=!1;k.suppressInputUpdate=!0;k.typeAheadDelay=1;k.minQueryLength=0;k.maxResultsDisplayed=allOrganisms.length;e||(k.sendQuery(""),g.prop("placeholder",f));
k.formatResult=function(l,m,p){let [n,q]=l;m=n.label;l=n.tier;m=m==q?m:q+" (synonym for "+m+")";return"<span class='tier"+l+"' title='"+m+"'>"+m+"</span>"+(1==l||2==l?"<span class='screen-reader-only'> (Tier "+l+" database)</span>":"")};k.itemSelectEvent.subscribe(function(l,m){l=m[2][0];m=m[1].firstChild.textContent;YAHOO.util.Dom.get(a).value=m;YAHOO.util.Dom.get(c).innerHTML=m;d&&(m=YAHOO.util.Dom.get(d))&&(m.value=l.id)});k.dataRequestEvent.subscribe(function(l,m){k.typeAhead=0<m[1].length});
k.dataReturnEvent.subscribe(function(l,m){l=YAHOO.util.Dom.get(b);if(0==m[2].length)l.style.display="none";else{let p=k.getListEl();$j(p).empty();l.style.display="block";l.firstChild.scrollTop=0}updateNumOrgs(m[2].length,m[1])});return{oDS:h,oAC:k}}function updateOrgFilter(){var a=YAHOO.util.Dom.get("orgInput"),b=$j(a).prop("placeholder");orgSelectorAC.oAC.sendQuery(a.value);$j(a).prop("placeholder",b)}
function populateQuickLinks(){for(var a=getRecentlyUsedCookies(),b=YAHOO.util.Dom.get("recentlyUsedContent"),c=0;c<a.length;c++)createQuicklink(b,a[c]);a=YAHOO.util.Dom.get("popularDatabasesContent");b=YAHOO.ptools.popularDatabases;if(0<b.length)for(c=0;c<b.length;c++)createQuicklink(a,b[c]);else YAHOO.util.Dom.get("popular").style.display="none";c=YAHOO.util.Dom.get("myPreferredContent");a=YAHOO.util.Dom.get("myPreferred");void 0!=window.preferred_database&&null!=preferred_database&&""!=preferred_database&&
"none"!=preferred_database&&createQuicklink(c,preferred_database)?a.style.display="block":a.style.display="none";YAHOO.util.Dom.get("setPreferredDiv").style.visibility=void 0!=window.preferred_database&&null!=preferred_database&&""!=preferred_database?null:"hidden"}
function createQuicklink(a,b){var c=orgNameFromOrgID(b);if(c){let d=document.createElement("a");b=orgIDtoOrgStructure(b).tier;YAHOO.util.Dom.addClass(d,"tier"+b);let e=document.createTextNode(c);d.appendChild(e);d.setAttribute("href",'javascript:quickLinkClick("'+c+'")');a.appendChild(d);a.appendChild(document.createElement("br"));if(1==b||2==b)a=document.createElement("span"),a.appendChild(document.createTextNode(" (Tier "+b+" database)")),a.classList.add("screen-reader-only"),d.appendChild(a);return d}return!1}
var onAlphabetListClick=new YAHOO.util.CustomEvent("onAlphabetListClick"),onQuickLinkClick=new YAHOO.util.CustomEvent("onQuickLinkClick"),fnSubscriberScroller=function(a,b){YAHOO.log(a);orgSelectorAC.oAC.sendQuery("^"+b[0].letter);YAHOO.log("success")},fnSubscriberQuicklink=function(a,b){YAHOO.log(a);a=b[0];YAHOO.util.Dom.get("orgInput").value=a;YAHOO.util.Dom.get("orgInput2").innerHTML=a;YAHOO.log("success")};function alphabetClick(a){onAlphabetListClick.fire({letter:a})}
function quickLinkClick(a){onQuickLinkClick.fire(a)}onAlphabetListClick.subscribe(fnSubscriberScroller);onQuickLinkClick.subscribe(fnSubscriberQuicklink);
function changeOrganism(){(selectedOrgID=getChooserSelectedOrgid())?YAHOO.util.Connect.asyncRequest("GET","/set-orgkb?kb="+selectedOrgID,{success:function(a){YAHOO.util.Dom.get("setPreferred").checked&&YAHOO.util.Connect.asyncRequest("GET","/ajax-set-one-preference?type=PREFERRED-DATABASE&object="+selectedOrgID);initChooser.continuation?(orgSelectorDialog.hide(),a=initChooser.continuation,initChooser.continuation=!1,a.call(null,selectedOrgID)):(setOrganism(selectedOrgID),organismChangedEvent.fire(),
orgSelectorDialog.hide(),document.location.href="/organism-summary?object="+selectedOrgID)},failure:function(a){alert("set-orgkb failed")}}):alert("Please select a valid organism")}
function getChooserSelectedOrgid(){if(YAHOO.util.Dom.get("orgInputFBA").value)return orgIDFromOrgName(YAHOO.util.Dom.get("orgInputFBA").value);if(2==$j("#orgSelectorTabs").tabs("option","active"))return getTableSelectedOrgid();let a;return orgIDFromOrgName(YAHOO.util.Dom.get("orgInput").value)||(null==(a=YAHOO.util.Dom.get("selectedOrgid"))?void 0:a.value)}
function setOrganism(a){orgNameFromOrgID(a)&&(setRecentlyUsedCookie(a),YAHOO.ptools.currentOrgID=a,updateOrgName(a),updateAllOrgSpecificMenuItems())}function getRecentlyUsedCookies(){var a=[],b,c;for(b=0;5>b;b++)(c=get_cookie("recentOrgID"+b))&&(a[a.length]=c);return a}function setRecentlyUsedCookie(a){if(a=a.trim()){var b=0,c=a,d=get_cookie("recentOrgID"+b);for(set_cookie("recentOrgID0",a);d&&d!=a&&d!=c&&5>b;){b+=1;c=d;var e="recentOrgID"+b;d=get_cookie(e);set_cookie(e,c)}setWindowOrgID(a)}}var windowOrgArray;
function getWindowOrgArray(){windowOrgArray=[];var a=get_cookie("windowOrg");if(a){a=a.split(":");for(var b=0;b<a.length;b+=2)windowOrgArray[windowOrgArray.length]={name:a[b],org:a[b+1]}}}getWindowOrgArray();function saveWindowOrgArray(){for(var a="",b=0,c=windowOrgArray.length-1;0<=c;c--){var d=windowOrgArray[c];d.name&&d.org&&10>b&&(a=d.name+":"+d.org+":"+a,b++)}set_cookie("windowOrg",a)}
function setWindowOrgID(a){getWindowOrgArray();if(window.name&&0!=window.name.length&&"_"!=window.name[0])if(getWindowOrgID())for(var b=0;b<windowOrgArray.length;b++)windowOrgArray[b].name==window.name&&(windowOrgArray[b].org=a);else windowOrgArray[windowOrgArray.length]={name:window.name,org:a};else window.name=getNewWindowName(),windowOrgArray[windowOrgArray.length]={name:window.name,org:a};saveWindowOrgArray()}
function getNewWindowName(){windowOrgArray||getWindowOrgArray();if(0<windowOrgArray.length){for(var a=0,b,c=!0;c;){b="ptools"+a;for(var d=!1,e=0;e<windowOrgArray.length;e++)windowOrgArray[e].name==b&&(d=!0);d||(c=!1);a++}return b}return"ptools0"}function getWindowOrgID(){var a=!1;if(window.name)for(var b=0;b<windowOrgArray.length;b++)windowOrgArray[b].name==window.name&&(a=windowOrgArray[b].org);return a&&orgNameFromOrgID(a)?a:!1}
var chooserInitialized=!1,chooserInitialWidth=820,chooserInitialHeight=490;
function initChooser(){if(!chooserInitialized){loadChooser();10>=allOrganisms.length?$j(".alphabetFilter").css("visibility","hidden"):updateNumOrgs(allOrganisms.length,"");setFilterOptions(document.getElementById("orgFilter"));populateQuickLinks();orgSelectorAC=organismSelectorAC("orgInput","orgContainer","orgInput2","selectedOrgid");buildOrgSelectorTaxTree();populateMetadataSlotlist();populateFBATab();$j("#orgSelectorTabs").tabs();var a=document.getElementById("orgSelectorDialog");a.style.width=
a.offsetWidth+"px";chooserInitialized=!0}}
function loadChooser(){ajaxUpdater("orgSelectorDialogCC","/org-chooser",{async:!1});new YAHOO.util.KeyListener(document,{keys:13},{fn:changeOrganism});orgSelectorDialog=new YAHOO.widget.Dialog("orgSelectorDialog",{buttons:[{text:"OK",handler:function(){changeOrganism()},isDefault:!0},{text:"Cancel",handler:function(){this.cancel()}}],visible:!1,fixedcenter:!1,draggable:!0,dragOnly:!0,zIndex:1E3});orgSelectorDialog.width=chooserInitialWidth;(new YAHOO.util.Resize("orgSelectorDialog",{handles:["br"],
autoRatio:!1,minWidth:chooserInitialWidth,minHeight:chooserInitialHeight,status:!1})).on("resize",function(c){resizeChooser(c.height)},orgSelectorDialog,!0);orgSelectorDialog.render();orgSelectorDialog.center();orgSelectorDialog.beforeShowEvent.subscribe(initChooser);orgSelectorDialog.hideEvent.subscribe(restoreFocus);let a=$j("#orgSelectorDialog a:first"),b=$j("#orgSelectorDialog button:last");a.on("keydown",function(c){9==c.keyCode&&c.shiftKey&&(b.focus(),c.preventDefault())});b.on("keydown",function(c){9!=
c.keyCode||c.shiftKey||(a.focus(),c.preventDefault())})}function restoreFocus(){(dialogInvokedFrom.pop()||document.body).focus()}var tabHeightOffset=115,acHeightOffset=217;function resizeChooser(a){var b=a-tabHeightOffset,c=a-acHeightOffset,d=YAHOO.util.Dom.getElementsByClassName("orgselectorTab","div"),e=document.getElementById("orgContainer");YAHOO.util.Dom.setStyle(d,"height",b+"px");YAHOO.util.Dom.setStyle(e,"max-height",c+"px");orgSelectorDialog.cfg.setProperty("height",a+"px")}
function updateNumOrgs(a,b,c){0==b.length&&0==a&&(a=allOrganisms.length);b=0<b.length?" matching ":" ";var d;0<=a&&(d=1==a?"1"+b+"database available":0==a?"No matching databases available":a+b+"databases available");document.getElementById(c?c:"orgnum").innerHTML="<br>"+d}var chooserContinuation=!1;let dialogInvokedFrom=[];var orgSelectorDialog;
function showChooser(a,b,c){dialogInvokedFrom.push(document.activeElement);if(allOrganismsLoaded){initChooser();chooserContinuation=initChooser.continuation=a;setOrgFilter(c);var d=YAHOO.util.Dom.get("orgInput"),e=$j(d).prop("placeholder");b?(d.value=b,orgSelectorAC.oAC.sendQuery(b),$j("#orgSelectorTabs").tabs("option","active",0)):(d.value="",orgSelectorAC.oAC.sendQuery(""),$j(d).prop("placeholder",e));orgSelectorDialog.center();orgSelectorDialog.show();0==$j("#orgSelectorTabs").tabs("option","active")?
document.getElementById("orgInput").focus():$j("#orgSelectorTabs .yui-nav li.selected a").focus();set_cookie("usedOrgChooser","true")}else loadAllOrganisms(function(){showChooser(a,b,c)})}function loadAllOrganisms(a){YAHOO.util.Connect.asyncRequest("GET","/get-organisms-json",{success:function(b){(b=eval("("+b.responseText+")"))&&b.length&&b.length>=allOrganisms.length&&(allOrganisms=b,allOrganismsLoaded=!0,buildOrgAssociativeArrays(),a())}})}
function loadAllOrganismsAsync(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){const a=yield $j.ajax({url:"/get-organisms-json",dataType:"json"});a&&a.length&&a.length>=allOrganisms.length&&(allOrganisms=a,allOrganismsLoaded=!0,buildOrgAssociativeArrays())})}
function buildOrgSelectorTaxTree(){let a=$j("#orgSelectorTaxTree");a.jstree({core:{themes:{name:"proton",icons:!1,responsive:!0},keyboard:{space:function(b){b.preventDefault();this.activate_node(b.currentTarget)}},data:function(b,c){let d=this;$j.ajax({url:"/ajax-pgdb-taxon-subs",data:{object:"#"===b.id?"TAX-1":b.id},dataType:"json",success:function(e){let g;(null==(g=e)?0:g.length)?e.forEach(function(f){f.text=f.label;f.a_attr={};f.doc&&(f.a_attr["data-tippy-content"]=f.doc);if("true"==f.isClass)f.children=
!0,f.numInstances&&(f.text=f.label+" ("+f.numInstances+")");else{f.type="pgdb";f.children=[];let h=orgIDtoOrgStructure(f.id);h&&(f.a_attr.class="tier"+h.tier,f.text=h.label,1==h.tier||2==h.tier)&&(f.text+="<span class='screen-reader-only'> (Tier "+h.tier+" database)</span>")}}):e=[];c.call(d,e)},error:function(e,g,f){console.log(g+" "+f);c.call(d,[])}})}},types:{pgdb:{valid_children:[]}},search:{search_callback:function(b,c){return c.id==b||c.original.taxId==b},ajax:{url:"/ajax-path-to-taxon",dataType:"json"}},
plugins:["sort","search","types"]}).on("activate_node.jstree",function(b,c){"pgdb"==a.jstree("get_type",c.node)?(b=orgNameFromOrgID(c.node.id),$j("#orgInput").val(b),$j("#orgInput2").html(b)):a.jstree("toggle_node",c.node)}).on("ready.jstree",function(){a.jstree("get_node","#").children.forEach(b=>a.jstree("open_node",b))}).on("open_node.jstree",function(b,c){1==c.node.children.length&&a.jstree("open_node",c.node.children[0])}).on("redraw.jstree",function(){addTooltips(a[0])}).on("after_open.jstree",
function(){addTooltips(a[0])});initTaxAC(a,"taxName","taxContainer","taxTabInterior")}function initTaxAC(a,b,c,d){let e=ACNameSelector(YAHOO.util.Dom.get(b),YAHOO.util.Dom.get(c),!1,"PGDB-TAXA");e.on("autocompleteselect",function(g,f){a.jstree("search",f.item.id)});e.on("autocompletechange",function(g,f){f.item||e.val("")})}function mdGetElt(a,b,c){return document.getElementById(clauseElt(a,b,c))}function clauseElt(a,b,c){return c?c+a+b:a+b}function isUserLoggedIn(a){a(userInfo?!0:!1)}
function processFBAModelsOrgids(a){YAHOO.util.Connect.asyncRequest("GET","/get-fba-orgids?",{success:function(b){var c=JSON.parse(b.responseText);b=c?c.user||[]:[];c=c?c.public||[]:[];var d=b.length,e=c.length,g=document.getElementById("FBAcontentTab");if(0<d+e){for(var f=(0==d?a?"Note: You have not created any metabolic models on the server.":"Note: You are not logged in. Any metabolic models that you may have created on the server are not accessible.":"<h3>Organisms with My Metabolic Models</h3>")+
"<ol>",h=0;h<d;h++)f+="<li><a href=# onclick='setOrgidFBA(\""+b[h].orgid+"\")'><i>"+orgNameFromOrgID(b[h].orgid)+"</i></a>, "+b[h].nb+" model(s)</li>";f+="</ol>";b=(0==e?"There are no public metabolic FBA models":"<h3>Organisms with Public Metabolic Models</h3>")+"<ol>";for(h=0;h<e;h++)b+="<li><a href=# onclick='setOrgidFBA(\""+c[h].orgid+"\")'><i>"+orgNameFromOrgID(c[h].orgid)+"</i></a>, "+c[h].nb+" model(s)</li>";g.innerHTML="<h3>Select a Database</h3>"+f+(b+"</ol>")}else g.innerHTML=a?"<h2>The Server has no Available Metabolic Models at this Time</h2><p>You have not created any metabolic models and no public models are available on the server.</p>":
"<h2>The Server has no Metabolic Models</h2><p>You are not logged in. Any metabolic models that you may have created on the server are not accessible. Also, there are no public metabolic models available on the server.</p>"}})}function setOrgidFBA(a){var b=document.getElementById("orgInputFBA");b.innerHTML=orgNameFromOrgID(a);b.value=orgNameFromOrgID(a)}function populateFBATab(){isUserLoggedIn(processFBAModelsOrgids)}var PGDBMetadataSlots;
function populateMetadataSlotlist(a){loadCSS("https://cdn.datatables.net/v/dt/dt-1.13.4/sl-1.6.2/datatables.min.css");loadJS("https://cdn.datatables.net/v/dt/dt-1.13.4/sl-1.6.2/datatables.min.js");PGDBMetadataSlots?populateMetadataSlotSelector(a):YAHOO.util.Connect.asyncRequest("GET","/ajax-get-all-pgdb-metadata-slots",{success:function(b){if(PGDBMetadataSlots=eval("("+b.responseText+")"))PGDBMetadataSlots.sort(function(c,d){return c.NAME>d.NAME}),populateMetadataSlotSelector(a)}})}
function populateMetadataSlotSelector(a){for(var b=0;6>b;b++){var c=mdGetElt("mdSlot",b,a),d=mdGetElt("mdEnum",b,a);if(c){for(var e=0;e<PGDBMetadataSlots.length;e++){var g=PGDBMetadataSlots[e],f=g.NAME,h=g.TOOLTIP||"";g.UNIT&&(f+=" ("+g.UNIT+")");h&&(h+="\n");h+=g.COUNT+" organism databases have a value for this property.";g=createOption(f,g.SLOT,h);c.options[c.options.length]=g}$j(d).chosen({width:"300px",placeholder_text_multiple:"Click to see possible values"});c=$j(d).attr("aria-label");$j(d).siblings(".chosen-container").find("input").attr("aria-label",
c)}}}function selectedSlotObj(a,b){if(a=getMdSelectVal("mdSlot",a,b))for(b=0;b<PGDBMetadataSlots.length;b++)if(PGDBMetadataSlots[b].SLOT==a)return PGDBMetadataSlots[b]}var substringACs=[];function searchSlotVals(a,b){var c=[];a=a.toLowerCase();for(var d=0;d<b.length;d++){var e=b[d].ID;0<=e.toLowerCase().search(a)&&(c[c.length]=e)}c.sort(caseInsensitiveSortFn);return c}
function initSubstringAC(a,b,c){var d=mdGetElt("mdKeyword",a,b),e=mdGetElt("mdKWContainer",a,b);b=b?1:0;c&&(c.ds||(c.ds=new YAHOO.util.FunctionDataSource(function(g){return searchSlotVals(g,c.VALUES)})),substringACs[b]||(substringACs[b]=[]),substringACs[b][a]?substringACs[b][a].dataSource=c.ds:(d=new YAHOO.widget.AutoComplete(d,e,c.ds),d.maxResultsDisplayed=16,substringACs[b][a]=d))}
function updateMetadataSlot(a,b){var c=selectedSlotObj(a,b),d=mdGetElt("keywordInput",a,b),e=mdGetElt("numericInput",a,b),g=mdGetElt("mdEnum",a,b),f=mdGetElt("mdEnumContainer",a,b),h=mdGetElt("mdConstraint",a,b),k=!1;mdGetElt("mdKeywordOp",a,b).selectedIndex=0;mdGetElt("mdNumOp",a,b).selectedIndex=0;for(var l=g.length-1;0<=l;l--)g.remove(l);c&&2>h.selectedIndex&&(k=!0);k&&"K"==c.TYPE?(d.style.display=null,e.style.display="none",f.style.display="none",updateForOp(a,clauseElt("mdKeywordOp",a,b),clauseElt("mdSubstringAC",
a,b),b)):k&&"N"==c.TYPE?(d.style.display="none",e.style.display=null,f.style.display="none",updateForOp(a,clauseElt("mdNumOp",a,b),clauseElt("mdNum",a,b),b)):k&&"E"==c.TYPE?(d.style.display="none",e.style.display="none",f.style.display=null,populateMetadataValueSelector(c,g)):(d.style.display="none",e.style.display="none",f.style.display="none");setAddClauseButton(b)}
function populateMetadataValueSelector(a,b){a=a.VALUES;for(var c=0;c<a.length;c++){var d=a[c],e=d.NAME||d.ID,g=" ("+d.COUNT+")",f=45-g.length;e.length>f&&(e=e.substring(0,f-3)+"...");e+=g;d=createOption(e,d.ID);b.options[b.options.length]=d}$j(b).trigger("chosen:updated")}
function updateForOp(a,b,c,d){var e=selectedSlotObj(a,d);c=document.getElementById(c);var g=mdGetElt("mdEnum",a,d),f=mdGetElt("mdEnumContainer",a,d);"enum"==getSelectVal(b)?(0==g.options.length&&(e.VALUES?populateMetadataValueSelector(e,g):YAHOO.util.Connect.asyncRequest("GET","/ajax-get-metadata-slot-values?slot="+e.SLOT,{success:function(h){e.VALUES=eval("("+h.responseText+")");populateMetadataValueSelector(e,g)}})),c.style.display="none",f.style.display=null):("substr"==getSelectVal(b)&&initSubstringAC(a,
d,e),c.style.display=null,f.style.display="none")}function allowNewClauseP(a){for(var b=!1,c=0;6>c;c++){var d=mdGetElt("clause",c,a),e=mdGetElt("mdSlot",c,a);if("none"==d.style.display)b=!0;else if(0==e.selectedIndex)return!1}return b}
function moveClauseUp(a,b){var c=a-1;moveSelectorUp("connector",a,b);moveSelectorUp("mdSlot",a,b);moveSelectorUp("mdConstraint",a,b);updateMetadataSlot(c,b);moveSelectorUp("mdKeywordOp",a,b);moveSelectorUp("mdNumOp",a,b);var d=selectedSlotObj(a,b);d&&("K"==d.TYPE?updateForOp(c,clauseElt("mdKeywordOp",c,b),clauseElt("mdSubstringAC",c,b),b):"N"==d.TYPE&&updateForOp(c,clauseElt("mdNumOp",c,b),clauseElt("mdNum",c,b),b));moveInputUp("mdKeyword",a,b);moveInputUp("mdNum",a,b);a=mdGetElt("mdEnum",a,b);b=
mdGetElt("mdEnum",c,b);b.selectedIndex=a.selectedIndex;for(c=0;c<b.options.length;c++)b.options[c].selected=a.options[c].selected;$j(b).trigger("chosen:updated");$j(a).trigger("chosen:updated")}function moveSelectorUp(a,b,c){mdGetElt(a,b-1,c).selectedIndex=mdGetElt(a,b,c).selectedIndex}function moveInputUp(a,b,c){mdGetElt(a,b-1,c).value=mdGetElt(a,b,c).value}
function clearClause(a,b){mdGetElt("mdSlot",a,b).selectedIndex=0;updateMetadataSlot(a,b);mdGetElt("mdKeyword",a,b).value="";mdGetElt("mdNum",a,b).value=""}function mdAddClause(a){for(var b=1;"none"!=mdGetElt("clause",b,a).style.display&&6>b;)b++;mdGetElt("clause",b,a).style.display=null;setAddClauseButton(a)}
function mdRemoveClause(a,b){var c=a+1;for(clearClause(a,b);6>c&&"none"!=mdGetElt("clause",c,b).style.display;)moveClauseUp(c,b),clearClause(c,b),a++,c++;mdGetElt("clause",a,b).style.display="none";setAddClauseButton(b)}function setAddClauseButton(a){var b=mdGetElt("addClause","",a);allowNewClauseP(a)?b.style.display=null:b.style.display="none"}function getSelectVal(a){if(a=document.getElementById(a))return a.options[a.selectedIndex].value}
function getMdSelectVal(a,b,c){return getSelectVal(clauseElt(a,b,c))}function mdGenerateQuery(a){for(var b="",c=0;6>c;c++){var d=mdGenerateSubquery(c,a),e="";if(d){if("CANCEL"==b)return"CANCEL";0<b.length&&(e=" "+getMdSelectVal("connector",c,a)+" ");b+=e+"("+d+")"}}return encodeURIComponent(b)}
function mdGenerateSubquery(a,b){var c="";if("none"!=mdGetElt("clause",a,b).style.display){var d=selectedSlotObj(a,b);if(d){var e=d.SLOT,g=getMdSelectVal("mdConstraint",a,b);if("a"==g)c=e;else if("n"==g)c=e+" NO-VALUE";else{var f="K"==d.TYPE,h="N"==d.TYPE;if("E"==d.TYPE||f&&"enum"==getMdSelectVal("mdKeywordOp",a,b)||h&&"enum"==getMdSelectVal("mdNumOp",a,b)){d=mdGetElt("mdEnum",a,b).options;for(a=0;a<d.length;a++)d[a].selected&&(0<c.length&&(c+=" OR "),c+="("+e+' E "'+d[a].value+'")');c||(c=e)}else f?
(c=getMdSelectVal("mdKeywordOp",a,b),c=(a=mdGetElt("mdKeyword",a,b).value)?e+" "+c+' "'+a+'"':e):h&&(c=getMdSelectVal("mdNumOp",a,b),(a=mdGetElt("mdNum",a,b).value)?isNaN(parseFloat(a))?(alert('Value "'+a+'" for property '+d.NAME+" must be a number."),c="CANCEL"):c=e+" "+c+' "'+a+'"':c=e);"nc"==g&&(c="!("+c+")")}}}return c}function processMdQuery(a,b){let c=mdGenerateQuery(b);"CANCEL"!=c&&loadMdQueryResults(c,a,b)}
function getTableSelectedOrgid(a){a||(a="#mdResultsTable");let b;return null==(b=$j(a).DataTable().row({selected:!0}).data())?void 0:b.ORGID}function getTableSelectedOrgids(a){a||(a="#mmdResultsTable");return $j(a).DataTable().rows({selected:!0}).data().map(b=>b.ORGID)}
function loadMdQueryResults(a,b,c){c=c?"#"+c+"mdResults":"#mdResults";let d=c+"Table";$j(d).length?($j(d).dataTable().api().destroy(),$j(d).empty()):$j('<table class="stripe cell-border hover compact"/>').attr("id",d.slice(1)).css("width","100%").appendTo(c);c=[{data:"ORGID",title:(b?"<input id='orgTableSelectAllBtn' type=checkbox title='Select All' aria-label='Organism: Select All'> ":"")+"<a download href=# id='orgTableDownload' title='Download Results' aria-label='Download Results'><i class='fa fa-download'></i></a> Organism",
visible:!0,render:function(f){let h=orgNameFromOrgID(f)||f;orgIDtoOrgStructure(f);return"<input type="+(b?"checkbox":"radio")+" name='mdTableSelect' value='"+f+"' aria-label='"+h+"'> "+h}}];for(var e=0;e<PGDBMetadataSlots.length;e++){let f=PGDBMetadataSlots[e];c.push({data:f.SLOT,title:f.NAME,visible:!1})}let g=$j(d).DataTable({ajax:{url:"/ajax-get-metadata-query-results",data:{q:a},dataSrc:""},columns:c,paging:!1,scrollY:"50vh",scrollCollapse:!0,language:{select:{rows:b?"%d organisms selected.":
""},info:"_TOTAL_ matching organisms were found; click to "+(b?"toggle selection; shift-click to select a range.":"select."),infoEmpty:"No matching organisms were found."},select:{style:b?"multi+shift":"single"},drawCallback:function(){$j("#orgTableDownload").click(function(){event.stopPropagation();this.href=tableToDataURI(d)});b&&($j(d+" td input[type=checkbox").change(function(){let f=$j(this).closest("tr").prop("_DT_RowIndex");this.checked?g.row(f).select():g.row(f).deselect()}),$j("#orgTableSelectAllBtn").click(function(){event.stopPropagation()}),
$j("#orgTableSelectAllBtn").change(function(){this.checked?g.rows().select():g.rows().deselect()}))},dom:"ift"}).on("xhr.dt",function(f,h,k){for(f=0;f<PGDBMetadataSlots.length;f++){let l=PGDBMetadataSlots[f].SLOT;for(h=0;h<k.length;h++)k[h][l]?g.column(f+1).visible(!0):k[h][l]=""}}).on("select",function(f,h,k,l){g.rows(l).nodes().to$().find("input").prop("checked",!0)});if(b)g.on("deselect",function(f,h,k,l){g.rows(l).nodes().to$().find("input").prop("checked",!1)})}
function tableToText(a){function b(c,d){return $j(d).text()}return $j(a).find("tr").map(function(c,d){c=$j(d).find("td");c.length||(c=$j(d).find("th"));return c.map(b).get().join("\t")}).get().join("\n")}function tableToDataURI(a){a=tableToText(a);return"data:text/plain;charset=utf-8,"+encodeURIComponent(a)}
function cvtBannerToSingleOrg(){for(var a=YAHOO.util.Dom.getElementsByClassName("withDatabase","div"),b=0;b<a.length;b++)YAHOO.util.Dom.removeClass(a[b],"withDatabase");a=YAHOO.util.Dom.getElementsByClassName("menuDatabase","table");for(b=0;b<a.length;b++)YAHOO.util.Dom.setStyle(a[b],"visibility","hidden");a=YAHOO.util.Dom.getElementsByClassName("searchMenuDatabaseName","div");for(b=0;b<a.length;b++)YAHOO.util.Dom.setStyle(a[b],"visibility","hidden")}function addSiteSpecificMenuItems(){}
function addContextSpecificToolbarMenus(){var a=getTypeObjectPage().type,b=getTypeObjectPage().gene;a=b&&"class"!=stringTypeToType(a)?"gene":a;b=b?b:getTypeObjectPage().object||objectFrameIDFromURL();a=stringTypeToType(a);var c=orgID(),d=a+"Menu";"protein"!=a&&"enzyme"!=a||addProteinMenu(d,a,b,c);"pathway"==a&&addPathwayMenu(d,a,b,c);"reaction"==a&&addReactionAtomMappingMenu(d,b,c);document.getElementById("mapReg")&&addRegOvMenu();document.getElementById("mapCel")&&addCelOvMenu();document.getElementById("WG_GENOV_LEGEND_div-loaded")&&
addGenOvMenu();addSearchOtherDBsMenuCommand(d,a,b,c);"gene"==a&&addGeneMenu(d,b,c)}var defaultTypeObjectPage={object:"",orgid:"",type:"",biopax2:!1,biopax3:!1,gene:!1};function getTypeObjectPage(){return window.typeObjectPage||defaultTypeObjectPage}function recordPageTitle(a,b){window.typeObjectPage=getTypeObjectPage();window.typeObjectPage.prefix=a;window.typeObjectPage.title=b}
function addReactionAtomMappingMenu(a,b,c){createToolbarMenu(a,{text:"Reaction",submenu:{id:a,itemdata:[{url:"/"+c+"/download-atom-mappings?object="+b,text:"Download atom mapping(s) for this reaction"},{text:"Download Genes",url:"/"+c+"/reaction-genes?object="+b,tooltip:"Generate a textual table listing each gene for this reaction (id, name, accession)."}]}},"objMenu")}
function downloadReactionAtomMappings(a,b){YAHOO.util.Connect.asyncRequest("GET","/"+b+"/ajax-download-atom-mappings?object="+a,{success:function(c){c.responseText&&alert(c.responseText)}})}function checkEnterDialog(a){return 13==(a&&a.which?a.which:a.keyCode)?(submitHighlight(),!1):!0}function insertMark(a,b){if(!a)return b;var c=b.toLowerCase().indexOf(a);return 0<=c?b.substr(0,c)+"<font color=brown><b>"+b.substr(c,a.length)+"</b></font>"+b.substr(c+a.length):b}
function addGenOvAutoCompletionSubstr(a,b){var c=new YAHOO.util.FunctionDataSource(function(){return genOvSearch(a,!0)});b=new YAHOO.widget.AutoComplete(a,b,c);b.animVert=!1;b.autoHighlight=!1;b.maxResultsDisplayed=200;b.animSpeed=1;b.queryDelay=.5;b.alwaysShowContainer=!1;b.formatResult=function(d,e,g){return insertMark(e,g)}}
function genOvSearch(a,b){a=document.getElementById(a).value;var c=WG.wglist,d=[];if(0==a.length)return{results:[]};for(var e=0;e<c.length;e++)if(0<c[e].links.length){var g=c[e];g=g.links;d=b?d.concat(searchGenOvSubstringLinksForCompletion(g,a)):d.concat(searchGenOvSubstAndFrameLinksForCompletion(g,a))}return d}
function searchGenOvSubstAndFrameLinks(a,b){if(null==a||void 0==a)return[];var c=[];b=b.toLowerCase();for(var d=0;d<a.length;d++){var e=a[d][6].split(" "),g=e[2].toLowerCase();e=e[7].toLowerCase();0==g.indexOf(b)&&c.push(a[d]);0==e.indexOf(b)&&c.push(a[d])}return c}function searchGenOvSubstringLinks(a,b){if(null==a||void 0==a)return[];var c=[];b=b.toLowerCase();for(var d=0;d<a.length;d++)0<=a[d][6].split(" ")[2].toLowerCase().indexOf(b)&&c.push(a[d]);return c}
function searchGenOvSubstAndFrameLinksForCompletion(a,b){if(null==a||void 0==a)return[];b=[];for(var c=stringName.toLowerCase(),d=0;d<a.length;d++){var e=a[d][6].split(" "),g=e[2].toLowerCase();e=e[7].toLowerCase();0==g.indexOf(c)&&b.push(g);0==e.indexOf(c)&&b.push(e)}b.sort();return b}
function searchGenOvSubstringLinksForCompletion(a,b){if(null==a||void 0==a)return[];var c=[];b=b.toLowerCase();for(var d=0;d<a.length;d++){var e=a[d][6].split(" ")[2].toLowerCase();0<=e.indexOf(b)&&c.push(e)}c.sort();return c}
function submitHighlight(){if(window.genOvDialogs)for(var a=0;a<genOvDialogs.length;a++)if(genOvDialogs[a].cfg.getProperty("visible"))return a=genOvDialogs[a].cfg.getProperty("buttons"),a[0].handler(),!1;if(window.regDialogs)for(a=0;a<regDialogs.length;a++)if(regDialogs[a].cfg.getProperty("visible"))return a=regDialogs[a].cfg.getProperty("buttons"),a[0].handler(),!1;if(window.celDialogs)for(a=0;a<celDialogs.length;a++)if(celDialogs[a].cfg.getProperty("visible"))return a=celDialogs[a].cfg.getProperty("buttons"),
a[0].handler(),!1;return!0}function showOvDialog(a){a.show();a.focusFirst()}function showOvBusy(a){var b=document.getElementById("ovIndicator");b.innerHTML=a?"<center>"+a+"</center>":"<center><h2>Processing ...</h2></center>";b.innerHTML+="<br><img src='/rel_interstitial_loading.png'/>";b.style.visibility="visible";b.style.width="350px";b.style.height="120px";b.style.border="red solid 2px";document.body.style.cursor="progress"}
function showOvNotBusy(){document.getElementById("ovIndicator").style.visibility="hidden";document.body.style.cursor="default"}function loadWGscripts(){for(var a=document.getElementsByClassName("webGraphics"),b=0;b<a.length;b++)for(var c=a[b].getElementsByTagName("script"),d=0;d<c.length;d++)eval(c[d].innerHTML)}function initGenomeOverview(){WG.LoadGenomeOverview(orgID(),"mapGenOv");loadWGscripts();addGenOvMenu()}
function addGenOvMenu(){createToolbarMenu("genOverviewMenu",{submenu:{id:"genOverviewMenu",itemdata:[{text:"Highlight Gene by Name",url:"javascript:showOvDialog(genOvDialogNameOrFrameID)",tooltip:"Highlight chosen gene in Genome Overview"},{text:"Highlight Gene(s) by Substring",url:"javascript:showOvDialog(genOvDialogSubstring)",tooltip:"Highlight gene(s) containing substring in Genome Overview"},{text:"Clear All Highlighting",url:"javascript:ClearGenOvHighlighting()",tooltip:"Clear Highlighted Genes"}]}},
"objMenu");document.getElementById("navBoxTitle").style.display="none"}function ClearGenOvHighlighting(){for(var a=WG.wglist,b,c=0;c<a.length;c++)0<a[c].links.length&&(b=a[c],b.genOvLinks=[],WG.Draw(b))}
function handleGenOvHighlightNameOrFrameID(){var a=document.getElementById("genOvNameOrFrameID").value;genOvDialogNameOrFrameID.hide();showOvBusy("Highlighting Gene by Name or FrameID");if(0==a.length){var b=new YAHOO.widget.Dialog("noHighlightingDialog",{width:"30em",fixedcenter:!0,modal:!0,visible:!0,draggable:!1,buttons:[{text:"Ok",handler:function(){b.hide()},isDefault:!0}]});b.setHeader("Highlight Genes by Name or FrameID Warning");b.setBody("No gene name or gene frame id was entered.");b.cfg.setProperty("icon",
YAHOO.widget.Dialog.ICON_WARN);b.render(document.body)}else{var c=WG.wglist;let f=!1;for(var d=0;d<c.length;d++)if(0<c[d].links.length){var e=c[d];var g=searchGenOvSubstAndFrameLinks(e.links,a);0<g.length&&(f=!0,e.genOvLinks=e.genOvLinks.concat(g),WG.Draw(e))}f||(b=new YAHOO.widget.Dialog("noHighlightingDialog",{width:"30m",fixedcenter:!0,modal:!0,visible:!0,draggable:!1,buttons:[{text:"Ok",handler:function(){b.hide()},isDefault:!0}]}),b.setHeader("Highlight Genes by Name or FrameID Warning"),b.setBody("No gene was found with name or frame ID '"+
a+"'."),b.cfg.setProperty("icon",YAHOO.widget.Dialog.ICON_WARN),b.render(document.body))}showOvNotBusy()}
function handleGenOvHighlightSubstr(){var a=document.getElementById("genOvSubstringName").value;genOvDialogSubstring.hide();showOvBusy("Highlighting Substring");if(0==a.length){var b=new YAHOO.widget.Dialog("noHighlightingDialog",{width:"30em",fixedcenter:!0,modal:!0,visible:!0,draggable:!1,buttons:[{text:"Ok",handler:function(){b.hide()},isDefault:!0}]});b.setHeader("Highlight Genes Substring Warning");b.setBody("No gene substring name was entered.");b.cfg.setProperty("icon",YAHOO.widget.Dialog.ICON_WARN);
b.render(document.body)}else{var c=WG.wglist;let f=!1;for(var d=0;d<c.length;d++)if(0<c[d].links.length){var e=c[d];var g=searchGenOvSubstringLinks(e.links,a);0<g.length&&(f=!0,e.genOvLinks=e.genOvLinks.concat(g),WG.Draw(e))}f||(b=new YAHOO.widget.Dialog("noHighlightingDialog",{width:"30m",fixedcenter:!0,modal:!0,visible:!0,draggable:!1,buttons:[{text:"Ok",handler:function(){b.hide()},isDefault:!0}]}),b.setHeader("Highlight Genes Substring Warning"),b.setBody("No gene was found with substring '"+
a+"'."),b.cfg.setProperty("icon",YAHOO.widget.Dialog.ICON_WARN),b.render(document.body))}showOvNotBusy()}
function addRegOvMenu(){createToolbarMenu("regOverviewMenu",{text:"Regulatory&nbsp;Overview",submenu:{id:"regOverviewMenu",itemdata:[{text:"Change Layout",url:"javascript:regChangeLayoutShow()",tooltip:"Specify whether genes should be laid out as nested ellipses or from top to bottom (for Complete Regulatory Overview only)."},{text:"Redisplay Highlighted Genes Only",url:"javascript:regRedisplayHighlightedGenesOnly()",tooltip:"If you have highlighted one or more sets of genes, regenerate the diagram showing just those genes, in top-to-bottom format."},
{text:"Redisplay Complete Regulatory Overview",url:"javascript:regDisplayCompleteOverview()",tooltip:"If currently showing highlighted genes only, return to view that shows all genes."},{text:"",classname:"spacer"},{text:"Highlight Genes",style:"EXPANDED",submenu:{id:"highlightGenesMenu",itemdata:[{url:"javascript:showOvDialog(regDialogNameOrFrameID)",text:"Genes By Name or Frame ID"},{url:"javascript:showOvDialog(regDialogSubstring)",text:"Genes By Substring"},{url:"javascript:regInitDialogGeneOntology()",
text:"Genes By Gene Ontology Terms"},{text:"Clear All Highlighting",url:"javascript:clearAllHighlightedGenes()"}]}},{text:"",classname:"spacer"},{text:"Print Regulatory Network to File",url:"javascript:getRegNetFile(null, null, null)"},{text:"Show Legend",url:"javascript:regDialogLegend.show()"},{text:"Help",url:"javascript:window.open('/PToolsWebsiteHowto.shtml#regOverview');void(0)"}]}},"objMenu")}
function addCelOvMenu(){var a=[{url:"javascript:showOvDialog(celDialogGeneNameOrFrameID)",text:"By Name or Frame ID"},{url:"javascript:showOvDialog(celDialogGeneSubstring)",text:"By Substring"},{url:"javascript:showOvDialog(celDialogGeneFile)",text:"From File"},{text:"By Replicon",onclick:{fn:celOverviewHighlightAllGenesInReplicons}},{url:"javascript:GeneRegulon()",text:"By Regulon"}];isPanGenomePGDB()&&(a=a.concat([{text:"Pan-Genome Core Genes",onclick:{fn:handleCelHighlightCoreGenesInPanGenome}},
{text:"Pan-Genome Unique Genes",onclick:{fn:handleCelHighlightUniqueGenesInPanGenome}}]));createToolbarMenu("celOverviewMenu",{text:"Cellular&nbsp;Overview",submenu:{id:"celOverviewMenu",itemdata:[{text:"Overlay Experimental Data (Omics Viewer)",style:"EXPANDED",tooltip:"Color nodes and/or edges according to data imported from an omics dataset (such as a gene expression or metabolomics dataset). Multiple timepoints can be viewed as an animation (with graph of all timepoints in mouseovers).",submenu:{id:"omicsViewerMenu",
itemdata:[{url:"javascript:omicsViewer(initCelOverview)",text:"Upload Data from File",tooltip:"Overlay data (such as gene expression or metabolomics data) by uploading a tab-delimited file, with object names or ids in the first column, and data values in one or more subsequent columns."},{text:"Enter/Paste Data from Keyboard",url:"javascript:celDialogMixing.show()",tooltip:"Type or paste in a set of object names or ids to be highlighted.  If omics data is supplied for each object (optional), the omics viewer will be invoked."},
{url:"javascript:omicsViewer(initCelOverview,'GEO')",text:"Import Data from GEO",tooltip:"Search for datasets in GEO (Gene Expression Omnibus) that match some keyword for this organism, and overlay the data on this diagram."},{url:"javascript:omicsViewer(initCelOverview, 'cookie')",text:"From Recent Datasets (GEO only)",tooltip:"Overlay data from a recently visited GEO dataset. Because data from uploaded files is not stored on the server, this option is not available for recently uploaded files -- to avoid having to re-upload a file, try saving the data as a Group."},
{url:"javascript:omicsViewer(initCelOverview, 'group')",text:"From SmartTable",tooltip:"Overlay data from a recently visited Group that has objects (e.g. genes, compounds, reactions) in the first column, and data values in or or more subsequent columns.  Only groups visited in the current session are available for this option."},{text:"Invoke Omics DataTable",style:"COLLAPSED",submenu:{id:"invokeOmicsDataTable",itemdata:[{url:"javascript:fullOmicsDataTable()",text:"For all Omics data"},{url:"javascript:pwyCategoriesOmicsDataTable()",
text:"For Selected Pathway Categories"}]}}]}},{text:"",classname:"spacer"},{text:"Highlight",style:"EXPANDED",submenu:{id:"celHighlightMenu",itemdata:[{text:"Highlight Pathway(s)",style:"COLLAPSED",submenu:{id:"celHighlightPathwaysMenu",itemdata:[{url:"javascript:showOvDialog(celDialogPathwayNameOrFrameID)",text:"By Name or Frame ID"},{url:"javascript:showOvDialog(celDialogPathwaySubstring)",text:"By Substring"},{url:"javascript:showOvDialog(celDialogPathwayCuration)",text:"By Curation"},{url:"javascript:PathwayEvidence()",
text:"By Evidence"}]}},{text:"Highlight Reaction(s)",style:"COLLAPSED",submenu:{id:"celHighlightReactionsMenu",itemdata:[{url:"javascript:showOvDialog(celDialogReactionNameOrFrameID)",text:"By Name or Frame ID"},{url:"javascript:showOvDialog(celDialogReactionSubstring)",text:"By Substring"},{url:"javascript:showOvDialog(celDialogReactionEC)",text:"By EC Number"},{url:"javascript:showOvDialog(celDialogReactionEnzyme)",text:"By Enzyme Name"},{url:"javascript:showOvDialog(celDialogSpeciesComparison)",
text:"Species comparison"},{url:"javascript:ReactionEvidence()",text:"By Evidence"},{url:"javascript:ReactionCCO()",text:"By Enzyme Cellular Location"},{text:"By Modulation",style:"COLLAPSED",submenu:{id:"celHighlightCompoundModulationMenu",itemdata:[{text:"Cofactor",style:"COLLAPSED",submenu:{id:"celHighlightCompoundCoFactorMenu",itemdata:[{url:"javascript:showOvDialog(celDialogCoFactorNameOrFrameID)",text:"By Name or Frame ID"},{url:"javascript:showOvDialog(celDialogCoFactorSubstring)",text:"By Substring"},
{url:"javascript:showOvDialog(celDialogCoFactorStructure)",text:"By Structure"},{url:"javascript:ReactionCofactor()",text:"Any Compound"}]}},{text:"Activator",style:"COLLAPSED",submenu:{id:"celHighlightCompoundActivatorMenu",itemdata:[{url:"javascript:showOvDialog(celDialogActivatorNameOrFrameID)",text:"By Name or Frame ID"},{url:"javascript:showOvDialog(celDialogActivatorSubstring)",text:"By Substring"},{url:"javascript:showOvDialog(celDialogActivatorStructure)",text:"By Structure"},{url:"javascript:ReactionActivator()",
text:"Any Compound"}]}},{text:"Inhibitor",style:"COLLAPSED",submenu:{id:"celHighlightCompoundInhibitorMenu",itemdata:[{url:"javascript:showOvDialog(celDialogInhibitorNameOrFrameID)",text:"By Name or Frame ID"},{url:"javascript:showOvDialog(celDialogInhibitorSubstring)",text:"By Substring"},{url:"javascript:showOvDialog(celDialogInhibitorStructure)",text:"By Structure"},{url:"javascript:ReactionInhibitor()",text:"Any Compound"}]}}]}}]}},{text:"Highlight Gene(s)",style:"COLLAPSED",submenu:{id:"celHighlightGenesMenu",
itemdata:a}},{text:"Highlight Enzyme(s)",style:"COLLAPSED",submenu:{id:"celHighlightEnzymesMenu",itemdata:[{url:"javascript:showOvDialog(celDialogEnzymeNameOrFrameID)",text:"By Name or Frame ID"},{url:"javascript:showOvDialog(celDialogEnzymeSubstring)",text:"By Substring"},{url:"javascript:showOvDialog(celDialogEnzymeCuration)",text:"By Curation"}]}},{text:"Highlight Compound(s)",style:"COLLAPSED",submenu:{id:"celHighlightCompoundsMenu",itemdata:[{url:"javascript:showOvDialog(celDialogCompoundNameOrFrameID)",
text:"By Name or Frame ID"},{url:"javascript:showOvDialog(celDialogCompoundSubstring)",text:"By Substring"}]}},{text:"Export Pathways with Highlights to Pathway Collage",url:"javascript:window.open('/cytoscape-js/ovsubset.html?celov=T&orgid='+initCelOverview.orgid+genCelURLQueryParms());",tooltip:"In a new tab, generate a Pathway Collage containing only those pathways for which one or more compounds or reactions are currently highlighted. Note that this applies only to basic highlight operations, not to omics data, and the maximum number of pathways for which a Pathway Collage can be generated is 100."},
{text:"Clear All Highlighting",url:"javascript:clearAllHighlightingCel()"}]}},{text:"",classname:"spacer"},{text:"Show Legend",url:"javascript:showOvDialog(celDialogLegend)"},{text:"Generate Bookmark for Current Cellular Overview",url:"javascript: celDialogGenURL.show(); genCelURL();",tooltip:"Generate a url that can be bookmarked or shared that shows the overview in its current highlighting state.  Note that this applies only to basic highlight operations, not to omics data."},{text:"Help",url:"javascript:window.open('/PToolsWebsiteHowto.shtml#celOverview');void(0)"}]}},
"objMenu")}
function addPathwayMenu(a,b,c,d){b=getTypeObjectPage();var e=!b.biopax2,g=!b.biopax3;e=[{text:"Customize or Overlay Omics Data on Pathway Diagram",onclick:{fn:function(){window.name="main";var f="/"+d+"/customize-pwy?object="+c+"&"+location.search.substring(1);window.open(f,"remote","width=560,height=800,menubar=0,toolbar=0,location=0,directories=0,status=0,resizable=1")}},tooltip:"Pop up a control panel allowing the user to customize the pathway diagram to show/hide various elements, and/or upload a file of omics data and color the diagram accordingly.  There is also the option to generate a publication-quality postscript or pdf version of the diagram."},{text:"Generate Pathway Collage",
url:"/cytoscape-js/ovsubset.html?orgid="+d+"&pwys="+c,tooltip:"Generate a Pathway Collage containing just this pathway.  Additional pathways involving any pathway substrate can be added interactively, and the diagram can be edited and customized in various ways, including the overlay of omics data.  It can also be saved for later retrieval, and exported to a high quality PNG image file."},{text:"Download Genes",url:"/"+d+"/pathway-genes?object="+c,tooltip:"Generate a textual table listing each gene in this pathway (id, name, accession) and the reaction it catalyzes."},
{text:"BioPax Level 2",url:"/"+d+"/pathway-biopax?type=2&object="+c,disabled:e,tooltip:e?"This pathway is not available in BioPax Level 2 format because it includes some features that are not supported.":"Download this pathway as a BioPax Level 2 OWL file.  Note that identifiers are generated automatically for this file, so cannot be compared among different downloads.  To obtain a file containing all pathways (with consistent identifiers) in BioPax format, see the Downloads page."},{text:"BioPax Level 3",
url:"/"+d+"/pathway-biopax?type=3&object="+c,disabled:g,tooltip:g?"This pathway is not available in BioPax Level 3 format because it includes some features that are not supported.":"Download this pathway as a BioPax Level 3 OWL file.  Note that identifiers are generated automatically for this file, so cannot be compared among different downloads.  To obtain a file containing all pathways (with consistent identifiers) in BioPax format, see the Downloads page."}];b.virtual&&(e[e.length]={text:"Select Organisms to Include in Pathway Diagram",
url:"javascript:virtualKbChooser()"});createToolbarMenu(a,{text:"Pathway",submenu:{id:a,itemdata:e}},"objMenu")}function addShowInMetacyc(a,b,c,d){"META"!==orgID()&&orgIDtoOrgStructure("META")&&YAHOO.util.Connect.asyncRequest("GET","/META/ajax-frame-exists-p?object="+b,{success:function(e){"T"==e.responseText&&(e=generateObjectURL(b,"META"),addMenuOpToNavBox({text:c,url:e,menuId:"compareOps",tooltip:"Navigate to the page for this object in the MetaCyc database, if it exists.",beginning:!0}))}})}
function generateObjectURL(a,b,c){return"/"+(b||orgID())+"/new-image?object="+encodeURIComponent(a)}function addProteinMenu(a,b,c,d){getTypeObjectPage().tf&&addMenuOpToNavBox({url:"/"+d+"/tf-binding-sites?object="+c,text:"Download Binding Sites"})}
function getScreenWidth(){var a=0;"number"==typeof window.innerWidth?a=window.innerWidth:document.documentElement&&document.documentElement.clientWidth?a=document.documentElement.clientWidth:document.body&&document.body.clientWidth&&(a=document.body.clientWidth);return a}
function addGeneOrthologMenuItems(a,b,c){getScreenWidth();a="javascript:selectOrgsAndGo('/"+(c+"/invoke-browse-orthologs?type=LOCUS-POSITION&object="+b)+"', navBoxMultiorgChooser)";var d="javascript:selectOrgsAndGo('/"+(c+"/compare-frame-in-orgs?type=ORTHOLOG&object="+b+"&initial-orgs="+c)+"', navBoxMultiorgChooser)";b="javascript:selectOrgsAndGo('/msa1.html?organism="+(c+"&orthologs="+b+":"+c+"&type=pep',  navBoxMultiorgChooser)");(1<allOrganisms.length||!allOrganismsLoaded)&&isOrgidGenBrowser(c)&&
(c=[{text:"Show Orthologs (with Operon Diagrams) in Multiple Databases",url:d,tooltip:"Generate a table listing this gene and its orthologs in the selected organism databases, showing gene products and operon organization."},{text:"Align in Multi-Genome Browser",url:a,tooltip:"Show this gene, along with its orthologs in the selected organism databases, in the Multi-Genome Browser"}],sriOrgDomain()&&(c.push({text:"Align Gene Nucleotide Sequence with Orthologs",url:"javascript:invokeOrthologMSA()",
tooltip:"Show this gene's nucleotide sequence aligned with its orthologs in the selected organism databases."}),c.push({text:"Align Gene Product Amino Acid Sequence with Orthologs",url:b,tooltip:"Show this gene product's amino acid sequence aligned with its orthologs in the selected organism databases."})),addMenuOpToNavBox({text:"Comparison Operations",id:"compareOps",submenu:{itemdata:c}}))}
function addGeneMenu(a,b,c){YAHOO.util.Connect.asyncRequest("GET","/ajax-orgid-has-orthologs-p?orgid="+c,{success:function(d){"true"==d.responseText&&addGeneOrthologMenuItems(a,b,c)}})}
function addFbaMenu(){createToolbarMenu("fbaMenu",{text:"Run Metabolic Model",submenu:{id:"fbaMenu",itemdata:[{text:"Import FBA Model from File",onclick:{fn:function(){}},id:"createFBAModelFromFile",tooltip:"Create a FBA model from a local file on your computer."},{text:"Create a New FBA Model",onclick:{fn:function(){}},id:"createNewFBAModel",tooltip:"Create a new FBA model that will need to be completed using this Web interface."},{text:"Copy Current FBA Model",onclick:{fn:function(){}},id:"copyCurrentModel",
tooltip:"Copy the current FBA model under a new name."},{text:"Export Current FBA Model",submenu:{id:"exportMenu",itemdata:[{text:"MetaFlux Format",href:"",onclick:{fn:function(){}},id:"exportCurrentModelFBA",tooltip:"Export the current FBA  model such that it can be imported by this interface (comments and description are not reimported)."},{text:"JSON Format (COBRA Toolbox)",onclick:{fn:function(){}},href:"",id:"exportCurrentModelJSON",tooltip:"Export the current FBA  model in JSON format, including all its reactions and metabolites, such that it can be used by the COBRA toolbox."}]}}]}},
"objMenu")}function stringTypeToType(a){if("string"!=typeof a)return"";a=a.toLowerCase();for(var b="compound gene pathway protein enzyme reaction transcription-units class".split(" "),c=0;c<b.length;c++)if(0<=a.indexOf(b[c]))return b[c];return""}var urlSearchAll,findObjectsDialog;
function initFindObjectsDialog(){$j("body").append('<div id="findObjectsDialog" style="display:none"><div class="hd">Find gene in other organisms</div><div class="bd"><form>Search for genes in multiple databases that match  </select>  the following criteria:<br>  <br>      <label><input type="checkbox" id="findObjectsGN" checked/>Same gene name</label><br><label><input type="checkbox" id="findObjectsPN" checked/>Same protein name</label><br><label><input type="checkbox" id="findObjectsO" checked/>Ortholog</label></form>');var a=
document.getElementById("findObjectsDialog");findObjectsDialog=new YAHOO.widget.Dialog(a,{width:"300px",fixedcenter:!0,visible:!1,close:!0,underlay:"matte",draggable:!0,constraintoviewport:!0,zindex:2E4,buttons:[{text:"OK",handler:function(){handleFindObjects()}},{text:"Cancel",handler:function(){findObjectsDialog.hide()}}]});findObjectsDialog.render();a.style.display="block"}function showInSelectedDBs(){findObjectsDialog||initFindObjectsDialog();findObjectsDialog.show()}
function handleFindObjects(){findObjectsDialog.hide();var a=document.getElementById("findObjectsGN").checked,b=document.getElementById("findObjectsPN").checked,c=document.getElementById("findObjectsO").checked;if(a||b||c){var d=urlSearchAll;a&&(d+="&gn=T");b&&(d+="&pn=T");c&&(d+="&o=T");selectOrgsAndGo(d,navBoxMultiorgChooser,!0)}}
function invokeOrthologMSA(){onChangedOrgsStored.subscribe(function(){1<getOrglistArray().length?getOrthologsForMSA():navBoxMultiorgChooser()});navBoxMultiorgChooser()}function getOrthologsForMSA(){$j.ajax({dataType:"json",url:"/ajax-get-orthologs",data:{gene:getTypeObjectPage().gene,orgid:orgID(),"allowed-orgids":getOrglistArray().join()},success:orthologMSADialog})}
function orthologMSADialog(a){function b(n){$j("#sameOffsetP").prop("checked")&&(n||(n=$j("#masterUpstream").val()),l.find("input.upstream").val(n))}function c(n){$j("#sameOffsetP").prop("checked")&&(n||(n=$j("#masterDownstream").val()),l.find("input.downstream").val(n))}function d(){$j("#sameOffsetP").prop("checked")?(b(),c(),f.find("input.upstream,input.downstream").css("visibility","hidden")):f.find("input.upstream,input.downstream").css("visibility","visible")}let e=orgID();if(2>a.length)alert("None of the selected organism have orthologs to this gene.");
else if(15<a.length)alert("You have selected too many organisms for this tool. A maximum of 15 sequences can be aligned at one time. Please try again with fewer organisms.");else{a.sort(function(n,q){return n.orgid==e?-1:q.orgid==e?1:orgNameFromOrgID(n.orgid)<orgNameFromOrgID(q.orgid)?-1:1});var g=$j("<div id=orthologDialog><div class='hd'>Specify optional offsets</div></div>"),f=$j("<div class='bd'</div>").html("<div>Instructions: The following orthologs were identified. You may specify an optional upstream and/or downstream region to include in the alignment (positive numbers increase the length of the aligned sequence beyond the gene boundaries, negative numbers decrease it). You may use either the same offset for all orthologs, or enter each one individually.</div>").css("line-height",
"1.23em").appendTo(g),h=$j("<div style='padding:10px 0px'><span>Use the same offsets for all orthologs?</span></div>").appendTo(f);$j("<input id='sameOffsetP' type=checkbox checked></input>").appendTo(h).change(d);var k=$j("<form action='/alignGeneSequences'></form>").appendTo(f),l=$j("<table><tr><th>Organism</th><th>Upstream offset</th><th style='padding:1px 6px'>Gene</th><th>Downstream offset</th></tr></table>").appendTo(k);h=$j("<tr/>").appendTo(l).append($j("<td/>").html(orgNameFromOrgID(a[0].orgid)));
var m=$j("<td/>").appendTo(h);$j("<input name='startOffset0' id='masterUpstream' type=number />").appendTo(m).change(function(){b(this.value)});$j("<td/>").html(a[0].label).appendTo(h);h=$j("<td/>").appendTo(h);$j("<input name='endOffset0' id='masterDownstream' type=number />").appendTo(h).change(function(){c(this.value)});$j("<input name='org0' type=hidden />").val(a[0].orgid).appendTo(k);$j("<input name='gene0' type=hidden />").val(a[0].gene).appendTo(k);for(h=1;h<a.length;h++)$j("<input type=hidden />").attr("name",
"org"+h).val(a[h].orgid).appendTo(k),$j("<input type=hidden />").attr("name","gene"+h).val(a[h].gene).appendTo(k),m=$j("<tr/>").appendTo(l).append($j("<td/>").html(orgNameFromOrgID(a[h].orgid))),$j("<td/>").appendTo(m).append($j("<input class='upstream' type=number />").attr("name","startOffset"+h)),$j("<td/>").html(a[h].label).appendTo(m),$j("<td/>").appendTo(m).append($j("<input class='downstream' type=number />").attr("name","endOffset"+h));f.find("input[type=number]").css("width","50px");l.find("th").css("font-size",
"inherit");l.find("td").css("text-align","center");l.find("td:first-child").css("text-align","left");$j("body").append(g);d();var p=new YAHOO.widget.Dialog(g[0],{width:"800px",fixedcenter:!0,visible:!0,close:!0,underlay:"matte",draggable:!0,constraintoviewport:!0,zindex:2E4,buttons:[{text:"OK",handler:function(){k.submit()}},{text:"Cancel",handler:function(){p.hide()}}]});p.render()}}var selectPwysDialog;
function initSelectPwysDialog(){var a=getTypeObjectPage().title,b=getTypeObjectPage().object,c;a='<div id="selectPwysDialog" style="display:none"><div class="hd">Select Pathways for Comparison</div><div class="bd"><form><input type="radio" name="multipwy" value=false checked>Compare one pathway: '+a+'</input><br><input type="radio" name="multipwy" value=true>Compare multiple pathways</input><br><p><div id="multipwySelector" class="flexRow" style="visibility:hidden"><div class="flexCol"><div>Available Pathways</div><select multiple id="availablePwys" class="pwyList"></select></div><div class="flexCol"><input type="button" id="multipwyAdd" value="Add &rarr;"><input type="button" id="multipwyDelete" value="Remove &larr;"><input type="button" id="multipwyClear" value="Clear All"></div><div class="flexCol"><div>Selected Pathways</div><select multiple id="selectedPwys" class="pwyList"></select></div></div></form></div></div>';
$j("body").append(a);$j("input:radio[name=multipwy]").on("change",function(){var d=$j("#multipwySelector");"true"==$j(this).val()?(d.css("visibility","visible"),c||(d.css("cursor","progress"),getAllPwys(function(e){e.sort(function(l,m){return l.label<m.label?-1:1});for(var g=$j("#availablePwys"),f=$j("#selectedPwys"),h=0;h<e.length;h++){var k=$j("<option></option>",{value:e[h].id,text:e[h].label}).appendTo(g);e[h].id==b&&(k.prop("disabled",!0),$j("<option></option>",{value:e[h].id,text:e[h].label}).appendTo(f))}d.css("cursor",
"")}),c=!0)):d.css("visibility","hidden")});$j("#multipwyAdd").click(function(){for(var d=$j("#selectedPwys"),e=$j("#availablePwys option:selected"),g=0;g<e.length;g++)$j("<option></option>",{value:e[g].value,text:e[g].text}).appendTo(d);d.children().detach().sort(function(f,h){return f.text<h.text?-1:1}).appendTo(d);e.prop("selected",!1);e.prop("disabled",!0)});$j("#multipwyDelete").click(function(){for(var d=$j("#selectedPwys option:selected"),e=0;e<d.length;e++)$j("#availablePwys option[value="+
d[e].value+"]").prop("disabled",!1);d.remove()});$j("#multipwyClear").click(function(){$j("#selectedPwys").empty();$j("#availablePwys").children().prop("disabled",!1)});a=document.getElementById("selectPwysDialog");selectPwysDialog=new YAHOO.widget.Dialog(a,{fixedcenter:!0,visible:!1,close:!0,underlay:"matte",draggable:!0,constraintoviewport:!0,zindex:2E4,buttons:[{text:"OK",handler:function(){var d=getOrglistStr(getOrglistArray());if("true"==$j('input[name="multipwy"]:checked').val()){var e=$j("#selectedPwys option");
if(0<e.length){for(var g="(",f=0;f<e.length;f++)0<f&&(g+=" "),g+=e[f].value;d=$j('<form action="compare-frame-in-orgs" method="post"><input type="hidden" name="type" value="PATHWAY"><input type="hidden" name="initial-orgids" value="'+d+'"><input type="hidden" name="object" value="'+(g+')"></form>'));$j("body").append(d);popupWaitMsg();d.submit()}else alert("No pathways were selected.")}else popupWaitMsg(),location.href="/compare-frame-in-orgs?type=PATHWAY&object="+encodeURIComponent(getTypeObjectPage().object)+
"&initial-orgids="+encodeURIComponent(d)}},{text:"Cancel",handler:function(){selectPwysDialog.hide()}}]});selectPwysDialog.render();a.style.display="block"}function getAllPwys(a){$j.ajax({dataType:"json",url:"/ajax-get-all-instances?object=Pathways",timeout:6E4,success:function(b){a(b)}})}function pwySpeciesComparison(){0<getOrglistArray().length?(selectPwysDialog||initSelectPwysDialog(),selectPwysDialog.show()):(onChangedOrgsStored.subscribe(pwySpeciesComparison),showMultiorgChooser())}
function addSearchOtherDBsMenuCommand(a,b,c,d){if(null!=c&&null!=d&&(1<allOrganisms.length||!allOrganismsLoaded)&&("compound"==b||"reaction"==b||"gene"==b||"pathway"==b||"protein"==b||"enzyme"==b||"class"==b)){var e="enzyme"==b?"protein":b,g=e.substring(0,1).toUpperCase()+e.substring(1).toLowerCase(),f="Search for This "+g+" in Multiple Databases",h="Select a set of organisms to search, and generate a table of links to this "+e+" in all of those organisms in which it was found.";"gene"==b&&(h+=" Searching is by both ortholog and gene name.");
var k="Show This "+g+" in Another Database";e="Select a different organism database, and open a new tab showing the page for this "+e+" (if it exists) in that database";urlSearchAll=showAllQueryString(b,c,d);addMenuOpToNavBox({text:"Comparison Operations",id:"compareOps",submenu:{itemdata:[{url:"javascript:showChooser(function(selectedOrgID){window.open(queryShowString(selectedOrgID,'"+b+"','"+d+"','"+c+"','"+g+"'))})",text:k,tooltip:e},{url:"gene"==b?"javascript:showInSelectedDBs()":'javascript:selectOrgsAndGo("'+
urlSearchAll+'", navBoxMultiorgChooser, true)',text:f,tooltip:h}]}})}"compound"!=b&&"reaction"!=b&&"pathway"!=b&&"class"!=b||addShowInMetacyc(a,c,"Show This "+g+" in MetaCyc",a)}function navBoxMultiorgChooser(){var a=getTypeObjectPage().gene;showMultiorgChooser();a&&updateChooserForOrthologStatus(a,orgID())}
function updateChooserForOrthologStatus(a,b){if(a&&b&&!YAHOO.multi.geneOrthologOrgidsLoaded){var c={success:function(d){d=eval("("+d.responseText+")");0<d.length&&(multiorg_boldOrgids=d,multiorg_legend=(multiorg_legend||"")+" Organisms in which an ortholog for this gene has been identified are shown in bold.",updateMultiorgLegend(),YAHOO.multi.AC.sendQuery(YAHOO.util.Dom.get("multiorgInput").value));YAHOO.multi.geneOrthologOrgidsLoaded=!0}};YAHOO.util.Connect.asyncRequest("GET","/"+b+"/ajax-get-containing-orgids?type=ORTHOLOG&object="+
a,c)}YAHOO.multi.noOrthologOrgidsLoaded||(c={success:function(d){d=eval("("+d.responseText+")");0<d.length&&(multiorg_grayOrgids=d,multiorg_legend=(multiorg_legend||"")+" Organisms for which no ortholog data is available have been grayed out (but can still be selected).",updateMultiorgLegend(),YAHOO.multi.AC.sendQuery(YAHOO.util.Dom.get("multiorgInput").value));YAHOO.multi.noOrthologOrgidsLoaded=!0}},YAHOO.util.Connect.asyncRequest("GET","/ajax-get-all-orgids-without-orthologs",c))}
function updateChooserForObjectPresence(a,b,c){a&&c&&b&&!YAHOO.multi.objectPresentOrgidsLoaded&&YAHOO.util.Connect.asyncRequest("GET","/"+c+"/ajax-get-containing-orgids?type="+b+"&object="+a,{success:function(d){d=eval("("+d.responseText+")");0<d.length&&(multiorg_boldOrgids=d,multiorg_legend=(multiorg_legend||"")+" Organisms listed in bold are those in which the object is inferred to be present",updateMultiorgLegend(),YAHOO.multi.AC.sendQuery(YAHOO.util.Dom.get("multiorgInput").value));YAHOO.multi.objectPresentOrgidsLoaded=
!0}})}function chooseStoredSelectedOrgs(){let a=function(b,c){popupWaitMsg(c[0].length?"The set of organisms for future comparison operations has been updated. "+c[0].length+" databases currently selected.":"The set of organisms for future comparison operations has been cleared.","Operation complete",5,!0);onChangedOrgsStored.unsubscribe(a)};onChangedOrgsStored.subscribe(a);navBoxMultiorgChooser()}
function virtualKbChooserLegend(){var a=getTypeObjectPage();return"Select up to 10 organisms whose enzymes should appear in pathway displays, either in addition to or instead of curated enzymes.<br>Pathway diagrams include: <select id='enzorg'><option value='NIL'>Selected Organism + Curated Enzymes</option><option value='SELECTED-ONLY'"+(a.selectedOnly?" selected":"")+">Selected Organism Enzymes only</option></select> Include colored presence/absence icons in diagram: <input id='virtualKbIcons' type='checkbox' style='vertical-align:middle'"+
(a.pwyOrgIcon?" checked":"")+"/>"}
function virtualKbChooser(){var a=getTypeObjectPage(),b=multiorg_unavailableOrgids,c=multiorg_maxOrgs,d=getOrglistArray(),e=multiorg_storeOnExit,g=multiorg_legend||" ";multiorg_legend=virtualKbChooserLegend();multiorg_maxOrgs=10;multiorg_storeOnExit=!1;multiorg_unavailableOrgids=[orgID()];YAHOO.multi.initialized?(updateMultiorgLegend(),deleteMultiorgOptions(!0),addOrgids(a.virtualOrgids)):multiorg_initiallySelected=a.virtualOrgids;onMultiorgSelectorOK.subscribe(function(f){f=encodeURIComponent(getOrglistStr(f));
var h=document.getElementById("enzorg").options[document.getElementById("enzorg").selectedIndex].value,k=document.getElementById("virtualKbIcons").checked?"Y":"N";f=addUrlParam(addUrlParam(addUrlParam(removeUrlParam(removeUrlParam(removeUrlParam(location.href,"setvirtual"),"ENZORG"),"showOrgIcons"),"setvirtual",f),"ENZORG",h),"showOrgIcons",k);location.href=f});onMultiorgSelectorCancel.subscribe(function(){multiorg_unavailableOrgids=b;multiorg_maxOrgs=c;multiorg_legend=g;updateMultiorgLegend();multiorg_storeOnExit=
e;deleteMultiorgOptions(!0);addOrgids(d)});showMultiorgChooser()}
function showWaitMsg(a,b,c){var d=null,e=function(){var f=new YAHOO.widget.Dialog("waitMsg",{width:"40em",fixedcenter:!0,modal:!0,visible:!0,draggable:!0,buttons:[{text:"Cancel Operation",handler:function(){f.hide();c&&c()},isDefault:!1}]});d=f;f.setHeader("Wait For Operation to Complete");f.setBody(a);f.cfg.setProperty("icon",YAHOO.widget.Dialog.ICON_WARN);f.render(document.body)},g=window.setTimeout(function(){e()},1E3*b);return function(){g&&clearTimeout(g);d&&d.hide()}}
function showAllQueryString(a,b,c){return"/"+c+"/show-in-other-dbs?type="+a.toUpperCase()+"&object="+encodeURIComponent(b)}
function queryShowString(a,b,c,d,e){return"compound"==b||"reaction"==b||"pathway"==b?"/query?submit=Submit+Query&object="+encodeURIComponent('("HTML-CUSTOM" "html-table-headers(['+(a+'~\\"'+d+'\\":'+a+'~\\"'+d+'\\"],(\\"')+e+'\\"),\\"show-sole-result\\")")'):"/query?submit=Submit+Query&object="+encodeURIComponent('("HTML-CUSTOM" "html-table-headers([r:l1:=find-objects(\\"'+a+'\\",'+c+'~\\"'+d+'\\"),l2:=find-orthologs(\\"'+a+'\\",'+c+'~\\"'+d+'\\"),both:=l1**l2,ort:=l2 -- both,sim:=l1 -- both,r<-[(database(r),r,r^'+
getOutputSlotName(b)+',\\"Same name/synonym\\"):r<-sim]++[(database(r),r,r^'+getOutputSlotName(b)+',\\"Ortholog\\"):r<-ort]++[(database(r),r,r^'+getOutputSlotName(b)+',\\"Same name/synonym and ortholog\\"):r<-both]],(\\"Organism (Database)\\",\\"'+e+'\\",\\"'+getOutputSlotName(b)+'\\",\\"Found Based On\\"),\\"show-sole-result\\")")')}
function getOutputSlotName(a){return"gene"==a?"Product":"compound"==a?"Chemical-formula":"pathway"==a?"Reaction-list":"reaction"==a?"EC-number":"protein"==a?"Gene":"enzyme"==a?"Gene":"name"}function objectFrameIDFromURL(){var a=location.pathname,b=0<=a.indexOf("new-image")||0<=a.indexOf("NEW-IMAGE"),c=getArgs();if(b&&void 0!=c.object)return c.object;a=a.split("/");b=a[1];return 4!=a.length||"id"!=b&&"gene"!=b&&"protein"!=b&&"pathway"!=b&&"reaction"!=b&&"compound"!=b&&"operon"!=b?null:a[3]}
function createToolbarMenu(a,b,c,d){var e=YAHOO.widget.MenuManager,g=e?e.getMenu(a):null;g?b.submenu&&g.addItems(b.submenu.itemdata):d?(g=e.getMenu("pathwayToolsMenubar"),g.addItem(b),c&&(a=e.getMenu(a).parent.element,YAHOO.util.Dom.addClass(a,c))):menuItemsToNavBox(b)}function menuItemsToNavBox(a){if(a.submenu&&a.submenu.itemdata){a=a.submenu.itemdata;for(var b=0;b<a.length;b++)a[b].disabled||addMenuOpToNavBox(a[b])}}
function ensureNavBoxOps(a,b){a||(b||(b=getNavBoxMenuId()),a=document.getElementById(b));if(!a){var c=getNavBoxOperationsDiv();a=document.createElement("ul");a.id=b;YAHOO.util.Dom.addClass(a,"tightMargin");c.appendChild(a);enableNavBox()}a.role="menu";return a}function getNavBoxMenuId(){var a=getTypeObjectPage().gene?"gene":getTypeObjectPage().type;return stringTypeToType(a)+"Menu"}function getNavBoxOperationsDiv(){return document.getElementById("navBoxOps")}
function enableNavBox(){populateNavBoxTitle();var a=document.getElementById("navBox");a.setAttribute("docked","");a.style.display="block";adjustForNavBoxWidth();a.style.position="absolute";setNavBoxPosition();adjustNavBoxPosition();window.onscroll=adjustNavBoxPosition;getHideNavBoxCookie()&&hideNavBox()}
function adjustNavBoxPosition(){let a=document.getElementById("navBox"),b=a.getAttribute("docked");!b&&0>a.offsetTop-window.pageYOffset?(a.style.top=0,a.style.position="fixed",a.setAttribute("docked",!0)):b&&window.pageYOffset<=a.getAttribute("initialTop")&&(a.style.position="absolute",a.style.top=a.getAttribute("initialTop")+"px",a.setAttribute("docked",""))}
function setNavBoxPosition(){let a=document.getElementById("navBox");if(a){var b=document.getElementById("topBannerMenu")||document.getElementById("pathwayToolsMenubar");null==a||a.setAttribute("initialTop",YAHOO.util.Dom.getY(b)+b.offsetHeight);"absolute"==a.style.position&&(a.style.top=a.getAttribute("initialTop")+"px")}}
function showNavBox(){document.getElementById("navBoxBody").style.display="block";$j(".navBoxExpansion").removeClass("navBoxHidden");$j(".navBoxExpansion a").attr("aria-expanded",!0);setHideNavBoxCookie(!1);adjustForNavBoxWidth()}function hideNavBox(){document.getElementById("navBoxBody").style.display="none";$j(".navBoxExpansion").addClass("navBoxHidden");$j(".navBoxExpansion a").attr("aria-expanded",!1);setHideNavBoxCookie(!0);adjustForNavBoxWidth()}
function toggleNavBox(){$j(".navBoxExpansion").hasClass("navBoxHidden")?showNavBox():hideNavBox()}function setHideNavBoxCookie(a){var b=new Date;b.setDate(b.getDate()+2);set_cookie("hideNavbox",a?"1":"",b)}function getHideNavBoxCookie(){var a=get_cookie("hideNavbox");return a?"1"==a:mobileP()}
function adjustForNavBoxWidth(){var a=YAHOO.util.Dom.getElementsByClassName("pageContentDynamic","div")[0];if(a)if("Cellular Overview"==document.title)a.style.paddingRight="15px";else{var b=document.getElementById("navBox");b="none"==document.getElementById("navBoxBody").style.display?0:YAHOO.util.Dom.getViewportWidth()-YAHOO.util.Dom.getX(b);a.style.paddingRight=b+15+"px"}}
function addMenuOpToNavBox(a,b){if(!a.disabled){b=ensureNavBoxOps(b);var c=findMatchingSubmenu(b,a);if(c)if(a.submenu&&a.submenu.itemdata)for(var d=a.submenu.itemdata,e=0;e<d.length;e++)d[e].disabled||addMenuOpToNavBox(d[e],c);else(a.url||a.onclick)&&addMenuOpToNavBox(a,c);else{c=document.createElement("li");d=document.createTextNode(a.text);a.beginning?b.insertBefore(c,b.firstChild):b.appendChild(c);a.id&&(c.id=a.id);if(a.url||a.onclick)YAHOO.util.Dom.addClass(c,a.classname||"navBoxLink"),b=document.createElement("a"),
b.appendChild(d),b.title=a.tooltip||a.text,b.href=a.url||"#",a.onclick&&(b.href="#",b.onclick=a.onclick.fn||function(){eval(a.onclick)}),a.target&&(b.target=a.target),b.role="menuitem",c.appendChild(b);else if(a.submenu){var g=document.createElement("div");e=document.createElement("span");g=document.createElement("div");var f=document.createElement("ul");e.appendChild(d);g.appendChild(e);g.title=a.tooltip||a.text;c.appendChild(g);f.role="menu";a.id&&(g.id=a.id+"_div",f.setAttribute("aria-labelledby",
g.id));a.submenu.id&&a.submenu.id!=a.id?f.id=a.submenu.id:a.id&&(f.id=a.id+"_ul");if(a.submenu.itemdata)for(d=a.submenu.itemdata,e=0;e<d.length;e++)d[e].disabled||addMenuOpToNavBox(d[e],f);f.hasChildNodes()?(c.appendChild(f),YAHOO.util.Dom.addClass(g,a.classname||"navBoxSubmenuHeader"),"EXPANDED"==a.style?(YAHOO.util.Dom.addClass(g,"submenuExpanded"),g.setAttribute("aria-expanded",!0),f.id&&g.setAttribute("aria-controls",f.id),addMenuToggleBehavior(g,f)):"COLLAPSED"==a.style&&(f.style.display="none",
YAHOO.util.Dom.addClass(g,"submenuCollapsed"),g.setAttribute("aria-expanded",!1),f.id&&g.setAttribute("aria-controls",f.id),addMenuToggleBehavior(g,f))):b.removeChild(c)}else c.appendChild(d),a.classname&&YAHOO.util.Dom.addClass(c,a.classname);adjustForNavBoxWidth()}}}function findMatchingSubmenu(a,b){var c=b.menuId;!c&&b.submenu&&(c=b.id);if(c)return findNavboxUlElt(c,a)}
function findNavboxUlElt(a,b){if((a=document.getElementById(a))&&(!b||b==a||a.compareDocumentPosition(b)&8)&&(b=a.getElementsByTagName("UL")))return b[0]}function addMenuToggleBehavior(a,b){YAHOO.util.Event.addListener(a,"click",function(){navBoxMenuToggle(a,b)})}
function navBoxMenuToggle(a,b){"none"==b.style.display?(b.style.display="block",YAHOO.util.Dom.replaceClass(a,"submenuCollapsed","submenuExpanded"),a.setAttribute("aria-expanded",!0)):(b.style.display="none",YAHOO.util.Dom.replaceClass(a,"submenuExpanded","submenuCollapsed"),a.setAttribute("aria-expanded",!1))}
function populateNavBoxTitle(){var a=getTypeObjectPage();a.title?(a.prefix&&(document.getElementById("objtypeNavBox").innerHTML=a.prefix+":"),document.getElementById("objnameNavBox").innerHTML=a.title):document.getElementById("navBoxTitle").style.display="none"}function mobileP(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function addUrlParam(a,b,c){a=0<=a.indexOf("?")?a+"&":a+"?";return a+(b+"="+c)}
function removeUrlParam(a,b){var c=a.indexOf("?");if(0<=c&&(b=a.substring(c+1).indexOf(b+"="),0<=b)){var d=a.substring(c+1+b).indexOf("&");a=0<=d?a.substring(0,c+b+1).concat(a.substring(c+b+2+d)):1<b?a.substring(0,c+b):a.substring(0,c+b+1)}return a}var cookie_js_version="Version 3.1S",TheCookie;
function Cookie_read_parse_cookie(){var a=document.cookie;if(""==a)return null;a=a.split("; ");for(var b=0,c=0;c<a.length;c++){var d=a[c].indexOf("=");if(-1!=d){var e=a[c].substring(0,d);d=a[c].substring(d+1);"expires"==e?this.expires=d:(b++,this.names[b]=e,this.values[b]=d,this.lookup[e]=d)}}this.count=b}
function writePersistentCookie(a,b,c,d){var e=new Date;d/=1;switch(c.toLowerCase()){case "years":c=e.getYear();1E3>c&&(c+=1900);e.setYear(c+d);break;case "months":e.setMonth(e.getMonth()+d);break;case "days":e.setDate(e.getDate()+d);break;case "hours":e.setHours(e.getHours()+d);break;case "minutes":e.setMinutes(e.getMinutes()+d);break;default:alert("Invalid periodType parameter for writePersistentCookie()")}document.cookie=escape(a)+"="+escape(b)+"; expires="+e.toGMTString()+"; path=/"}
function getCookieValue(a){a=new RegExp(escape(a)+"=([^;]+)");return a.test(document.cookie+";")?(a.exec(document.cookie+";"),unescape(RegExp.$1)):!1}function testSessionCookie(){document.cookie="testSessionCookie=Enabled";return"Enabled"==getCookieValue("testSessionCookie")?!0:!1}function testPersistentCookie(){writePersistentCookie("testPersistentCookie","Enabled","minutes",1);return"Enabled"==getCookieValue("testPersistentCookie")?!0:!1}
function deleteCookie(a){getCookieValue(a)&&writePersistentCookie(a,"Pending delete","years",-1);return!0}function Cookie_Save(){var a=new Date;a.setTime(a.getTime()+10368E6);a="expires="+a.toGMTString();for(var b,c=1;c<=this.count;c++)b=this.names[c]+"="+this.values[c]+"; ",document.cookie=b+a+"; path=/"}function Cookie_Session_Save(){Cookie_Wipe();for(var a=1;a<=this.count;a++){var b=this.names[a]+"="+this.values[a]+"; path=/; ";document.cookie=b}}
function Cookie_Wipe(){var a=new Date;a.setTime(a.getTime()-10368E6);a="expires="+a.toGMTString();for(var b,c=1;c<=this.count;c++)b=this.names[c]+"="+this.values[c]+"; path=/; ",document.cookie=b+a}function Cookie_findindex(a){for(var b=1;b<=this.count;b++)if(this.names[b]==a)return b;return 0}function Cookie_Add(a,b){var c;(c=this.findindex(a))||(this.count++,c=this.count,this.names[c]=a);this.values[c]=b;this.lookup[a]=b}
function Cookie(){this.names=[];this.values=[];this.lookup=[];this.expires=this.count=0;this.read_parse_cookie=Cookie_read_parse_cookie;this.Save=Cookie_Save;this.Session_Save=Cookie_Session_Save;this.findindex=Cookie_findindex;this.Add=Cookie_Add;this.read_parse_cookie()}TheCookie=new Cookie;
function getArgs(){let a=[],b=location.search.substring(1).split("&");for(var c=0;c<b.length;c++){var d=b[c].indexOf("=");if(-1!=d){var e=b[c].substring(0,d);d=b[c].substring(d+1);a[e]=unescape(d)}}return a}function initLogin(){if(void 0!=window.userAccountsEnabled&&userAccountsEnabled)initLoginPopup();else try{hideLogin()}catch(a){}}
function initLoginPopup(){let a=getArgs();"undefined"!=typeof a.logmsg&&("wrongpw"==a.logmsg?ShowPasswordIncorrect():"wrongemail"==a.logmsg?ShowEmailNotFound():"emailsent"==a.logmsg&&ShowEmailSent(),UnhideLogin())}function UnhideWhyLogin(){var a=document.getElementById("WhyLogin");a.style.visibility="visible";a.style.display="block"}function HideWhyLogin(){var a=document.getElementById("WhyLogin");a.style.visibility="hidden";a.style.display="none"}
function UnhideLogin(){var a=document.getElementById("Login");a.style.visibility="visible";a.style.display="block";$("lmsg").update("");SetURL();a.pleaseHideMeFlag=!1;document.getElementById("emailname").focus()}function pleaseHideLogin(){document.getElementById("Login").pleaseHideMeFlag&&HideLogin()}function HideLogin(){document.getElementById("Login").style.visibility="hidden";ClearThirdPanel()}
function ClearThirdPanel(){document.getElementById("ThirdPanel").innerHTML="";document.getElementById("LogInButton").value="Log In";document.getElementById("FirstRow").style.display="";document.getElementById("SecondRow").style.display="";document.getElementById("ThirdRow").style.display="";document.getElementById("FourthRow").style.display="";document.getElementById("emailname").value="";document.getElementById("password").value=""}
function ShowEmailSent(){document.getElementById("ThirdPanel").innerHTML="An email has been sent with<br>your login information."}function ShowEmailNotFound(){document.getElementById("ThirdPanel").innerHTML="<font color='red'>Email address not found.  Please<br>try again or create a new account.</font>"}function ShowPasswordIncorrect(){document.getElementById("ThirdPanel").innerHTML="<font color='red'>Password incorrect.&nbsp;Please&nbsp;try&nbsp;again.</font>"}
function ForgotPasswordize(){document.getElementById("LogInButton").value="Submit";document.getElementById("ThirdPanel").innerHTML="<b>Forgot your password?</b><br><br>Enter your account's<br>email address:<br><input  name='f_email_name' style='' size='29' tabindex='1'>";document.getElementById("FirstRow").style.display="none";document.getElementById("SecondRow").style.display="none";document.getElementById("ThirdRow").style.display="none";document.getElementById("FourthRow").style.display="none"}
function SetURL(){document.getElementById("myurl").value=document.location}function deleteHostCookie(){document.cookie="PTools-session=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function deleteSiteCookie(){var a=getSiteDomain();document.cookie="PTools-session=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT; Domain="+a;deleteHostCookie()}
function getSiteDomain(){for(var a=0,b=document.domain,c=b.split("."),d="_gd"+(new Date).getTime();a<c.length-1&&-1==document.cookie.indexOf(d+"="+d);)b=c.slice(-1-++a).join("."),document.cookie=d+"="+d+";domain="+b+";";document.cookie=d+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+b+";";return b}function LogOut(){xmlhttpGet("/logout.html","",deleteSiteCookie,!0);location.href="/";location.reload()}
function xmlhttpGet(a,b,c,d){var e=!1;window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP"));if(e){if(d)return e.open("GET",a,!1),e.send(b),c(e.responseText);e.open("GET",a,!0);e.onreadystatechange=function(){4==e.readyState&&c(e.responseText)};e.send(b)}else this.alertedAjax||(alert("Your browser does not support Ajax. This webpage will partially work."),this.alertedAjax=!0)}
function popupWaitMsg(a,b,c,d){var e=new YAHOO.widget.Panel("msgPopup",{width:"400px",constraintoviewport:!0,fixedcenter:!0,underlay:"shadow",close:d,zindex:2E3});e.setHeader("Please Wait...");e.setBody("Your request is being processed.  This is a computationally intensive operation and may take several minutes or more.  Please be patient.  Please do not resubmit your request while you are waiting.");b&&e.setHeader(b);a&&e.setBody(a);e.render();0<c&&setTimeout(function(){e.hide()},1E3*c);return e}
function popupShortWaitMsg(){popupWaitMsg("Please wait while this page is being generated, which may take a minute or more.")}function popupQueryWaitMsg(){popupWaitMsg("Please wait while your query is being processed.")}function trimWhitespace(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")}
function notificationsSubscribeClass(a,b){(new YAHOO.widget.SimpleDialog("dlg",{width:"400px",constraintoviewport:!0,fixedcenter:!0,underlay:"shadow",close:!0,zindex:2E3,buttons:[{text:"New Only",handler:function(){notificationsSubscribe(a,b,1);this.hide()}},{text:"New and Changed",handler:function(){notificationsSubscribe(a,b,0);this.hide()}},{text:"Cancel",handler:function(){this.hide()}}],visible:!0,modal:!0,text:"Two notification options are available for this class:<ul><li>Notify me only when new objects are added to this class or term, OR</li><li>Notify me both when new objects are added to this class or term, and when there are curated modifications to any objects currently assigned to this class or term.</li></ul>Please select one of these two options."})).render(document.body)}
function notificationsSubscribe(a,b,c){a="/ajax-notification-subscribe?orgid="+orgID()+"&id="+encodeURIComponent(b);if(0==c||1==c)a+="&newOnly="+c;YAHOO.util.Connect.asyncRequest("GET",a,{success:function(d){popupWaitMsg(('"ALREADY-SUBSCRIBED"'==d.responseText?"You are already subscribed to notifications for this object.":"Notification added.")+"<p><a href='/user-subscriptions.shtml'>Manage Update Notification</a>","Update Notifications",0,!0)},failure:function(){popupWaitMsg("Add failed. Please try again, or submit a bug report.<p><a href='/user-subscriptions.shtml'>Manage Update Notification</a>",
"Update Notifications",0,!0)}})}var multiorg_initiallySelected,multiorg_availableOrgids,multiorg_unavailableOrgids,multiorg_boldOrgids,multiorg_grayOrgids,multiorg_legend,multiorg_maxOrgs,multiorg_limitOrgs,multiorg_allowClasses,multiorg_allowSelectAll,multiorg_allSelected;YAHOO.namespace("multi");YAHOO.multi.initialized=!1;YAHOO.multi.savedOrglistsLoaded=!1;var multiorg_storeOnExit=!0;YAHOO.multi.savedOrglists=[];YAHOO.multi.organisms=[];
function showMultiorgChooser(a){dialogInvokedFrom.push(document.activeElement);allOrganismsLoaded?(initMultiorgChooser(),clearMultiAC(),multiorgProcessParams(a),multiorg_initiallySelected=getOrglistArray(),YAHOO.multi.chooser.center(),YAHOO.multi.chooser.show()):loadAllOrganisms(function(){showMultiorgChooser(a)})}
function initMultiorgChooser(){initMultiSelectOrganisms();if(!YAHOO.multi.initialized){var a=YAHOO.util.Dom.get("multiorgSelectorDialog");a.style.display="block";withSavedOrglistsLoaded(populateSavedOrglistContainers);var b;(null==(b=userInfo)?0:b.id)?($j("#multiorgSelectorDialog div.requiresLogin").css("display",""),$j("#multiorgSelectorDialog div.requiresNotLoggedIn").css("display","none"),$j("#multiorgSelectorDialog input[type=radio][name=stSave]").change(function(){"old"==$j(this).val()?($j("#multiorgSelectorDialog select#savedOrglistUpdate").css("display",
""),$j("#multiorgSelectorDialog input#orglistname").css("display","none")):($j("#multiorgSelectorDialog select#savedOrglistUpdate").css("display","none"),$j("#multiorgSelectorDialog input#orglistname").css("display",""))}),$j("#multiorgSelectorDialog input[type=button][value=Save]").click(function(){"old"==$j("#multiorgSelectorDialog input[type=radio][name=stSave]:checked").val()?updateNamedOrglist():createNamedOrglist()})):($j("#multiorgSelectorDialog div.requiresLogin").css("display","none"),$j("#multiorgSelectorDialog div.requiresNotLoggedIn").css("display",
"block"));b=YAHOO.multi.organisms.length;multiorg_initiallySelected&&multiorg_maxOrgs&&multiorg_initiallySelected.length>multiorg_maxOrgs&&(multiorg_initiallySelected=[]);multiorg_initiallySelected&&0!=multiorg_initiallySelected.length||(multiorg_initiallySelected=[orgID()]);addOrgids(multiorg_initiallySelected);10>=b?$j(".alphabetFilter").css("visibility","hidden"):updateNumOrgs(multiorg_initiallySelected?b-multiorg_initiallySelected.length:b,"","multiorgnum");setFilterOptions(document.getElementById("multiorgFilter"));
multiorganismSelectorAC();buildMultiOrgSelectorTaxTree();initMultiOrgTaxAC();populateMetadataSlotlist("m");$j("#multiorgSelectorTabs").tabs();multiorg_legend&&0<multiorg_legend.length&&(document.getElementById("legend").innerHTML=multiorg_legend);a.style.width=a.offsetWidth+"px";resizeMultiorgChooser(a.offsetHeight,a.offsetWidth);YAHOO.multi.initialized=!0}}
function multiorgProcessParams(a){multiorg_allowClasses=a&&a.allowClasses?!0:!1;multiorg_allowSelectAll=a&&a.allowSelectAll?!0:!1;multiorg_limitOrgs=a&&a.noOrgLimit?!1:!0;a=document.getElementById("multiorgSelectAllRow");YAHOO.util.Dom.setStyle(a,"display",multiorg_allowSelectAll?"block":"none");document.getElementById("multiorgMaxLabel").innerHTML=multiorg_allowSelectAll&&!multiorgMaxOrgs()?"":"(Max "+multiorgMaxOrgs()+")"}function multiorgMaxOrgs(){return multiorg_limitOrgs&&multiorg_maxOrgs}
function updateMultiorgLegend(){multiorg_legend&&0<multiorg_legend.length&&(document.getElementById("legend").innerHTML=multiorg_legend)}var onMultiorgSelectorOK=new YAHOO.util.CustomEvent("onMultiorgSelectorOK",this,!1,YAHOO.util.CustomEvent.FLAT),onMultiorgSelectorCancel=new YAHOO.util.CustomEvent("onMultiorgSelectorCancel",this,!1,YAHOO.util.CustomEvent.FLAT);
YAHOO.util.Event.onContentReady("multiorgSelectorDialog",function(){YAHOO.multi.chooser=new YAHOO.widget.Dialog("multiorgSelectorDialog",{buttons:[{text:"OK",handler:function(){var c=getOrglistArray();if(0<c.length||confirm("You have not selected any organisms. To exit the dialog with no organisms selected, press OK.  To return to the organism selector, press Cancel."))multiorg_storeOnExit&&storeSelectedOrgs(c),onMultiorgSelectorOK.fire(c),this.hide()},isDefault:!0},{text:"Cancel",handler:function(){deleteMultiorgOptions(!0);
addOrgids(multiorg_initiallySelected);onMultiorgSelectorCancel.fire();this.cancel()}}],visible:!1,fixedcenter:!1,draggable:!0,dragOnly:!0,zIndex:1E3});(new YAHOO.util.Resize("multiorgSelectorDialog",{handles:["br"],autoRatio:!1,minHeight:600,status:!1})).on("resize",function(c){resizeMultiorgChooser(c.height,c.width)},YAHOO.multi.chooser,!0);YAHOO.multi.chooser.render();YAHOO.multi.chooser.center();YAHOO.multi.chooser.beforeShowEvent.subscribe(initMultiorgChooser);YAHOO.multi.chooser.hideEvent.subscribe(restoreFocus);
let a=$j("#multiorgSelectorDialog a:first"),b=$j("#multiorgSelectorDialog button:last");YAHOO.multi.chooser.showEvent.subscribe(function(){a.focus()});a.on("keydown",function(c){9==c.keyCode&&c.shiftKey&&(b.focus(),c.preventDefault())});b.on("keydown",function(c){9!=c.keyCode||c.shiftKey||(a.focus(),c.preventDefault())})});var multiTabHeightOffset=216,multiTabWidthOffset=425,multiSelectionHeightOffset=206,multiAcHeightOffset=306;
function resizeMultiorgChooser(a,b){b=a-multiTabHeightOffset;var c=a-multiSelectionHeightOffset;a-=multiAcHeightOffset;var d=YAHOO.util.Dom.getElementsByClassName("multiorgselectorTab","div"),e=document.getElementById("multiorgSelection"),g=document.getElementById("multiorgContainer");YAHOO.util.Dom.setStyle(d,"height",b+"px");YAHOO.util.Dom.setStyle(e,"height",c+"px");YAHOO.util.Dom.setStyle(g,"max-height",a+"px")}
function multiorganismSelectorAC(){var a=new YAHOO.util.FunctionDataSource(searchNamesRemoveDuplicates);a.responseSchema={fields:["org","name"]};var b=new YAHOO.widget.AutoComplete("multiorgInput","multiorgContainer",a);YAHOO.multi.AC=b;b.alwaysShowContainer=!0;b.animVert=!1;b.autoHighlight=!1;b.suppressInputUpdate=!0;b.typeAheadDelay=1;b.minQueryLength=0;b.maxResultsDisplayed=YAHOO.multi.organisms.length;b.formatResult=function(c,d,e){let [g,f]=c;e=g.label;c=g.tier;(d=orgidClass(g.id)||"")&&(d+=
" ");e=e==f?e:f+" (synonym for "+e+")";return"<span class='"+(d+("tier"+c))+"' title='"+e+"'>"+e+"</span>"+(1==c||2==c?"<span class='screen-reader-only'> (Tier "+c+" database)</span>":"")};b.itemSelectEvent.subscribe(function(c,d){addNewSelectedOrgFromAC(d[2][0].label)});b.dataRequestEvent.subscribe(function(c,d){b.typeAhead=0<d[1].length});b.dataReturnEvent.subscribe(function(c,d){c=YAHOO.util.Dom.get("multiorgContainer");if(0==d[2].length)c.style.display="none";else{let e=b.getListEl();$j(e).empty();
c.style.display="block";c.firstChild.scrollTop=0}updateNumOrgs(d[2].length,d[1],"multiorgnum")});return{oDS:a,oAC:b}}function updateMultiOrgFilter(){YAHOO.multi.AC.sendQuery(YAHOO.util.Dom.get("multiorgInput").value)}function searchNamesRemoveDuplicates(a){a=searchNamesAndTags(a,filteredOrganisms(YAHOO.multi.organisms,getOrgFilter("multiorgFilter")));for(var b=[],c=0;c<a.length;c++){var d=a[c];findNameInCurrentSelection(d.org.label)||(b[b.length]=d)}return b}
function findNameInCurrentSelection(a){for(var b=orgListEl().options,c=0;c<b.length;c++)if(a==b[c].text)return!0;return!1}var fnSubscriberMultiorgScroller=function(a,b){YAHOO.multi.AC.sendQuery("^"+b[0].letter)};onAlphabetListClick.subscribe(fnSubscriberMultiorgScroller);function initMultiOrgTaxAC(){initTaxAC(YAHOO.multi.taxtree,"multiorgTaxName","multiorgTaxContainer","multiorgTaxTreeContainer")}
function scrollToTaxNode(a,b){b=document.getElementById(b);var c=b.offsetParent,d=b.offsetTop;a=a.getEl().offsetTop;a>c.offsetHeight&&(b.scrollTop=a-d)}
function buildMultiOrgSelectorTaxTree(){let a=$j("#multiorgSelectorTaxTree");YAHOO.multi.taxtree=a;a.jstree({core:{themes:{name:"proton",icons:!1,responsive:!0},keyboard:{space:function(b){b.preventDefault();this.is_checked(b.currentTarget)?this.uncheck_node(b.currentTarget):this.check_node(b.currentTarget)}},data:function(b,c){let d=this;$j.ajax({url:"/ajax-pgdb-taxon-subs",data:{object:"#"===b.id?"TAX-1":b.id},dataType:"json",success:function(e){let g;(null==(g=e)?0:g.length)?e.forEach(function(f){f.text=
f.label;f.a_attr={};f.doc&&(f.a_attr["data-tippy-content"]=f.doc);if("true"==f.isClass)f.children=!0,f.numInstances&&(f.text=f.label+" ("+f.numInstances+")");else{f.type="pgdb";f.children=[];let h=orgIDtoOrgStructure(f.id);if(h){let k="tier"+h.tier,l=orgidClass(f.id);l&&(k+=" "+l);f.text="<span class='"+k+"'>"+h.label+"</span>";if(1==h.tier||2==h.tier)f.text+="<span class='screen-reader-only'> (Tier "+h.tier+" database)</span>";includeOrgid(f.id)||(f.state={disabled:!0,selected:!1,checked:!1},f.a_attr.class=
"disabled-treenode")}}}):e=[];c.call(d,e)},error:function(e,g,f){console.log(g+" "+f);c.call(d,[])}})}},types:{pgdb:{valid_children:[]}},search:{search_callback:function(b,c){return c.id==b||c.original.taxId==b},ajax:{url:"/ajax-path-to-taxon",dataType:"json"}},checkbox:{keep_selected_style:!1},plugins:["sort","search","types","checkbox"]}).on("ready.jstree",function(){a.jstree("get_node","#").children.forEach(b=>a.jstree("open_node",b))}).on("open_node.jstree",function(b,c){1==c.node.children.length&&
a.jstree("open_node",c.node.children[0])}).on("redraw.jstree",function(){addTooltips(a[0])}).on("after_open.jstree",function(){addTooltips(a[0])})}function orgListEl(){return document.getElementById("multiorgSelection")}
function addNewSelections(){var a=$j("#multiorgSelectorTabs .ui-tabs-anchor")[$j("#multiorgSelectorTabs").tabs("option","active")].innerHTML;"By Name"==a?addNewMatchingOrgsFromAC():"By Taxonomy"==a?addNewSelectedOrgsFromTree(YAHOO.multi.taxtree,!0):"By Organism Properties"==a?addNewSelectedOrgsFromTable():"My Lists"==a&&addNewSelectedOrgsFromTree(YAHOO.multi.orglistTree)}function findInOptionList(a,b){for(var c=0;c<b.length;c++){var d=b[c];if(a==d.value)return d}}
function addOption(a,b,c,d){if(!findInOptionList(b,c)){var e=createOption(a,b);d&&(b=orgidClass(b))&&YAHOO.util.Dom.addClass(e,b);for(b=0;b<c.length&&c.options[b].text<a;)b++;b<c.length?c.add(e,c.options[b]):c.options[b]=e}}function createOption(a,b,c){var d=document.createElement("option");d.text=a;d.value=b;c&&(d.title=c);return d}function addMultiOrgListOption(a,b){var c=orgListEl();okToAddOrg(b,!1)&&(addOption(a,b,c,!0),updateMultiNumSelected())}
function deleteMultiorgOptions(a){multiorg_allSelected=!1;for(var b=orgListEl(),c=b.length-1;0<=c;c--)(a||b.options[c].selected)&&b.remove(c);updateMultiNumSelected();clearMultiAC();enableDisableAllSelectedButtons(!1)}function enableDisableAllSelectedButtons(a){YAHOO.util.Dom.getElementsByClassName("disableWhenAllSelected","input").forEach(function(b){b.disabled=a})}
function multiorgSelectAll(){deleteMultiorgOptions(!0);multiorg_allSelected=!0;addMultiOrgListOption("ALL available databases","ALL");clearMultiAC();enableDisableAllSelectedButtons(!0)}function updateMultiNumSelected(){var a=multiorg_allowSelectAll&&multiorg_allSelected?"ALL":orgListEl().length;document.getElementById("multiNumSelected").innerHTML=a}function clearMultiAC(){YAHOO.util.Dom.get("multiorgInput").value="";YAHOO.multi.AC.sendQuery("")}
function addNewSelectedOrgFromAC(a){a||(a=trimWhitespace(YAHOO.util.Dom.get("multiorgInput").value));var b=orgIDFromOrgName(a);b&&includeOrgid(b)&&okToAddOrg(b,!0)&&addMultiOrgListOption(a,b);YAHOO.multi.AC.sendQuery(YAHOO.util.Dom.get("multiorgInput").value)}
function addNewMatchingOrgsFromAC(){$j("#multiorgContainer li:visible span").each(function(){var a=this.innerHTML,b=orgIDFromOrgName(a);b&&includeOrgid(b)&&okToAddOrg(b,!0)&&addMultiOrgListOption(a,b)});YAHOO.multi.AC.sendQuery(YAHOO.util.Dom.get("multiorgInput").value)}
function addNewSelectedOrgsFromTree(a,b){if(b&&multiorg_allowClasses)addHilitTaxa(a);else{let d=a.jstree("get_top_checked",!0),e=!0,g=multiorgMaxOrgs(),f=0;for(var c=0;c<d.length;c++)f+=d[c].original.numInstances||1;g&&f>g?(alert("You may not select more than "+g+" databases. Please unselect some organisms and try again."),e=!1):300<f&&!confirm("You are about to retrieve and select a large number of organisms, which could take a substantial amount of time.  Are you sure you wish to continue?")&&(e=
!1);if(e){function h(k){return b?k.id:k.original.orgid}loadTreenodes(a,d,function(){let k=orgListEl().options,l=a.jstree("get_bottom_checked",!0).filter(p=>addableOrgidP(h(p),k));if(okToAddNOrgs(l.length)){for(var m=0;m<l.length;m++){let p=h(l[m]);addMultiOrgListOption(orgNameFromOrgID(p),p)}a.jstree("uncheck_all")}})}}}function loadTreenodes(a,b,c){if(b.length){let d=b.pop();a.jstree("load_all",d,function(){loadTreenodes(a,b,c)})}else c()}
function addHilitTaxa(a){a.jstree("get_top_checked",!0).forEach(function(b){findInOptionList(b.id,orgListEl().options)||addMultiOrgListOption(b.original.label,b.id)});a.jstree("uncheck_all",!0)}function withSavedOrglistsLoaded(a){var b={success:function(c){YAHOO.multi.savedOrglists=eval("("+c.responseText+")");YAHOO.multi.savedOrglistsLoaded=!0;a()}};YAHOO.multi.savedOrglistsLoaded?a():YAHOO.util.Connect.asyncRequest("GET","/ajax-get-orglist-names",b)}
function populateSavedOrglistContainers(){var a=YAHOO.multi.savedOrglists;let b;if(a){var c=a.filter(k=>k.predefined);b=a.filter(k=>!k.predefined).sort(caseInsensitiveSortByNameFn);YAHOO.multi.savedOrglists=c.concat(b)}buildSavedOrglistTree();a=YAHOO.util.Dom.getElementsByClassName("requiresSavedOrglist","span");c=YAHOO.util.Dom.getElementsByClassName("requiresNoSavedOrglist","span");if(b&&0<b.length){for(var d=YAHOO.util.Dom.getElementsByClassName("savedOrglistSelectEl"),e=0;e<d.length;e++)for(var g=
d[e],f=0;f<b.length;f++){var h=b[f];addOption(h.name,h.id,g)}YAHOO.util.Dom.setStyle(a,"display","block");YAHOO.util.Dom.setStyle(c,"display","none")}else YAHOO.util.Dom.setStyle(a,"display","none"),YAHOO.util.Dom.setStyle(c,"display","block")}function addOrgids(a){let b=orgListEl().options;if((a=a.filter(e=>addableOrgidP(e,b)))&&okToAddNOrgs(a.length))for(var c=0;c<a.length;c++){var d=a[c];addMultiOrgListOption(orgNameFromOrgID(d),d)}}
function addableOrgidP(a,b){return includeOrgid(a)&&orgNameFromOrgID(a)&&!findInOptionList(a,b)}function addNewSelectedOrgsFromTable(){addOrgids(getTableSelectedOrgids())}function getOrglistArray(){var a=[];if(YAHOO.multi.initialized)for(var b=orgListEl(),c=0;c<b.length;c++)0!=b.options[c].value&&(a[a.length]=b.options[c].value);else multiorg_initiallySelected&&(a=multiorg_initiallySelected);return a}
function saveOrglist(a,b){var c=encodeURIComponent(a),d=getOrglistArray(),e=encodeURIComponent(getOrglistStr(d));c="/ajax-save-orglist?name="+c+"&orgids="+e;b&&(c+="&id="+b);YAHOO.util.Connect.asyncRequest("GET",c,{success:function(g){if("-1"==g.responseText)alert("Save failed.");else{g=g.responseText;var f=!1;YAHOO.multi.savedOrglists||(YAHOO.multi.savedOrglists=[]);for(var h=YAHOO.multi.savedOrglists,k=0;k<h.length;k++)h[k].id==g&&(h[k].orgids=d,f=!0);f||(k=h.length,h[k]={name:a,id:g,orgids:d});
populateSavedOrglistContainers();alert("Organism list "+a+" saved.")}},failure:function(g){alert("Save failed.  Organism list "+a+" not saved.")},timeout:14E3})}function createNamedOrglist(){var a=trimWhitespace(document.getElementById("orglistname").value);0<a.length?saveOrglist(a):alert("You must provide a name for the new database list.")}function updateNamedOrglist(){var a=document.getElementById("savedOrglistUpdate");a=a.options[a.selectedIndex];saveOrglist(a.text,a.value)}
function initMultiSelectOrganisms(){if(multiorg_availableOrgids||multiorg_unavailableOrgids){YAHOO.multi.organisms=[];for(var a=0;a<allOrganisms.length;a++)includeOrgid(allOrganisms[a].id)&&(YAHOO.multi.organisms[YAHOO.multi.organisms.length]=allOrganisms[a])}else YAHOO.multi.organisms=allOrganisms}
function includeOrgid(a){var b=!1;if(multiorg_unavailableOrgids){for(var c=0;!b&&c<multiorg_unavailableOrgids.length;)multiorg_unavailableOrgids[c]==a&&(b=!0),c++;return!b}if(multiorg_availableOrgids){for(c=0;!b&&c<multiorg_availableOrgids.length;)multiorg_availableOrgids[c]==a&&(b=!0),c++;return b}return!0}
function isBold(a){if(multiorg_boldOrgids){var b=orgIDtoOrgStructure(a);if(b)if(b&&b.boldLabel){if("bold"==b.boldLabel)return!0}else{for(var c=0;c<multiorg_boldOrgids.length;c++)if(multiorg_boldOrgids[c]==a)return b.boldLabel="bold",!0;b.boldLabel="notbold"}}return!1}
function isGray(a){if(multiorg_grayOrgids){var b=orgIDtoOrgStructure(a);if(b)if(b&&b.grayLabel){if("gray"==b.grayLabel)return!0}else{for(var c=0;c<multiorg_grayOrgids.length;c++)if(multiorg_grayOrgids[c]==a)return b.grayLabel="gray",!0;b.grayLabel="notgray"}}return!1}function orgidClass(a){if(isBold(a))return"boldOrgid";if(isGray(a))return"grayOrgid"}
function buildSavedOrglistTree(){let a;YAHOO.multi.orglistTree?YAHOO.multi.orglistTree.jstree("refresh"):(YAHOO.multi.orglistTree=$j("#multiorgSavedTree"),a=YAHOO.multi.orglistTree,a.jstree({core:{themes:{name:"proton",icons:!1,responsive:!0},keyboard:{space:function(b){b.preventDefault();this.is_checked(b.currentTarget)?this.uncheck_node(b.currentTarget):this.check_node(b.currentTarget)}},data:function(b,c){let d=this;if("#"==b.id){b=[];var e=getRecentlyUsedCookies();e&&0<e.length&&b.push(fetchedOrglistToTreeNode("Recently Used",
e));(e=YAHOO.ptools.popularDatabases)&&0<e.length&&b.push(fetchedOrglistToTreeNode("Popular Databases",e));if(YAHOO.multi.savedOrglists&&0<YAHOO.multi.savedOrglists.length)for(e=0;e<YAHOO.multi.savedOrglists.length;e++){var g=YAHOO.multi.savedOrglists[e];g.orgids?b.push(fetchedOrglistToTreeNode(g.name,g.orgids)):b.push(unfetchedOrglistToTreeNode(g.name,g.id))}c.call(this,b)}else $j.ajax({url:"/ajax-get-orglist-contents",data:{id:b.id},dataType:"json",success:function(f){let h=[];(null==f?0:f.length)?
f.forEach(function(k){(k=orgidToTreeNode(k))&&h.push(k)}):h=[];h.sort((k,l)=>k.label>l.label?1:-1);c.call(d,h)},error:function(f,h,k){console.log(h+" "+k);c.call(d,[])}})}},checkbox:{keep_selected_style:!1},plugins:["types","checkbox"]}))}function orgidToTreeNode(a){let b=orgNameFromOrgID(a);if(b){let c=orgidClass(a),d={orgid:a,label:b,children:[]};d.text=c?"<span class='"+c+"'>"+b+"</span>":b;includeOrgid(a)||(d.state={disabled:!0,selected:!1,checked:!1});return d}return null}
function fetchedOrglistToTreeNode(a,b){let c=[];for(let d=0;d<b.length;d++){let e=orgidToTreeNode(b[d]);e&&c.push(e)}return{text:a,id:a,children:c}}function unfetchedOrglistToTreeNode(a,b){return{text:a,id:b,children:!0}}
function okToAddNOrgs(a){let b=orgListEl().options,c=!multiorg_allowClasses&&multiorgMaxOrgs();return c&&a+b.length>c?(b.length?alert("You may not select more than "+c+" organism databases. You currently have "+b.length+" selected and are attempting to add "+a+" more, which would put you over the limit. Please delete some existing selections and/or unselect some of the new organisms and try again."):alert("You may not select more than "+c+" organism databases. You are attempting to add "+a+" new databases. Please unselect some of the new organisms and try again."),
!1):!0}function okToAddOrg(a,b){var c=orgListEl();return!multiorg_allowClasses&&multiorgMaxOrgs()&&c.length>=multiorgMaxOrgs()&&!findInOptionList(a,c.options)?(b&&warnTooManyOrgs(),!1):!0}function warnTooManyOrgs(){alert("You may not select more than "+multiorg_maxOrgs+" organism databases.  Please delete some selections before attempting to add more.")}function getOrglistStr(a){return multiorg_allowSelectAll&&multiorg_allSelected?"ALL":"("+a.join(" ")+")"}
function outputSelectedOrgs(a,b,c){b.innerHTML="";if(multiorg_allowSelectAll&&multiorg_allSelected)b.innerHTML="ALL organism databases currently selected.";else if(a&&0<a.length){if(!allOrganismsLoaded)for(var d=0;d<a.length;d++)if(!orgIDtoOrgStructure(a[d]))return loadAllOrganisms(function(){outputSelectedOrgs(a,b,c)}),!1;b.innerHTML="<ul>";for(d=0;d<a.length;d++){var e=orgNameFromOrgID(a[d]),g=c?orgidClass(a[d]):!1;b.innerHTML=g?b.innerHTML+("<li class='"+g+"'>"+e):b.innerHTML+("<li>"+e)}b.innerHTML+=
"</ul>"}else b.innerHTML="No organism databases currently selected."}
function outputSelectedOrgsforCrossOrgSearch(a,b,c){b.innerHTML="";if(multiorg_allowSelectAll&&multiorg_allSelected)b.innerHTML="ALL organism databases currently selected.";else if(a&&0<a.length){if(!allOrganismsLoaded)for(var d=0;d<a.length;d++)if(!orgIDtoOrgStructure(a[d]))return loadAllOrganisms(function(){outputSelectedOrgsforCrossOrgSearch(a,b,c)}),!1;b.innerHTML="<ul>";for(d=0;d<a.length;d++){var e=orgNameFromOrgID(a[d]);if(!e){var g=YAHOO.multi.taxtree.jstree("get_node",a[d]);g&&(e=g.text);
g=c?orgidClass(a[d]):!1;b.innerHTML=g?b.innerHTML+("<li class='"+g+"'>"+e):b.innerHTML+("<li>"+e)}}b.innerHTML+="</ul>"}else b.innerHTML="ALL organism databases currently selected."}var onChangedOrgsStored=new YAHOO.util.CustomEvent("onChangedOrgsStored");function storeSelectedOrgs(a){var b="orgids="+getOrglistStr(a);YAHOO.util.Connect.asyncRequest("POST","/ajax-store-biocyc-orgids",{success:function(c){onChangedOrgsStored.fire(a)}},b)}
function clearMultiorgSelector(){YAHOO.multi.initialized?deleteMultiorgOptions(!0):multiorg_initiallySelected=[];onMultiorgSelectorOK.fire([])}
function goIfOrgsSelected(a,b,c){var d=getOrglistArray().length;c=c?0:1;var e=!multiorg_allowClasses&&multiorgMaxOrgs()&&d>multiorgMaxOrgs();d>c&&!e?(popupWaitMsg(),location.href=a):(e&&alert("Please select fewer organisms.  The maximum number of organisms this query can handle is "+multiorg_maxOrgs+"."),b&&(onChangedOrgsStored.subscribe(function(){goIfOrgsSelected(a)}),b()))}function selectOrgsAndGo(a,b,c){b&&(onChangedOrgsStored.subscribe(function(){goIfOrgsSelected(a,b,c)}),b())}
function ACNameSelector(a,b,c,d,e,g,f,h){g=g||orgID();let k=$j(a),l={type:d,max:2E3};k.prop("acURL",f?"/ajax-frame-search":"/"+g+"/ajax-frame-search");f&&(l.orgs=f);if("COMPOUND"==d||"GENE"==d)l.markclasses="t";e&&(l.noclasses="t");k.prop("acQueryArgs",l);c&&k.keydown(()=>c.value="");let m;k.autocomplete({source:function(p,n){l.object=p.term;m=null;c&&(c.value="");$j.ajax({url:k.prop("acURL"),data:l,dataType:"json",success:function(q){n(q.Results)}})},select:function(p,n){c&&(c.value=n.item.id);a.value=
n.item.label},change:function(p,n){h&&m&&c&&!c.value&&(c.value=m.id,a.value=m.label)},close:function(p,n){h&&m&&c&&!c.value&&(c.value=m.id,a.value=m.label)}}).autocomplete("instance")._renderItem=function(p,n){l.object.toUpperCase()==n.label.toUpperCase()&&(m=n);return $j("<li>").html(n.qName).appendTo(p)};return k}
function localACNameSelector(a,b,c,d,e){b=$j(a);let g=d.Results,f="",h;c&&b.keydown(()=>c.value="");b.autocomplete({source:function(k,l){f=k.term;h=null;if(0<k.term.length){let m=[];for(let p=0;p<g.length&&2E3>m.length;p++)getMatchingName(k.term,g[p].label,g[p].synonyms)&&(m.push(g[p]),g[p].label.toLowerCase()==k.term.toLowerCase()&&(h=g[p]));l(m)}else l(g)},select:function(k,l){c&&(c.value=l.item.id);a.value=l.item.label},change:function(k,l){h&&c&&!c.value?(c.value=h.id,a.value=h.label):e||l.item||
(a.value="")}}).autocomplete("instance")._renderItem=function(k,l){let m=getMatchingName(f,l.label,l.synonyms);l=m&&m!=l.label?l.label+" ("+m+")":l.label;return $j("<li>").html(l).appendTo(k)}}
function filterResultsWithSynonymSearch(a,b,c,d){d&&d.argument&&YAHOO.lang.isValue(d.argument.query)&&(a=d.argument.query);if(a&&""!==a){c=YAHOO.widget.AutoComplete._cloneObject(c);b=c.results;var e=[];d=d.scope.maxResultsDisplayed;for(var g=0;g<b.length;g++){var f=b[g];getMatchingName(a,f.label,f.synonyms)&&e.push(f);if(b.length>d&&e.length===d)break}c.results=e}else YAHOO.log("Did not filter results against query","info",this.toString());return c}
function getMatchingName(a,b,c){a=decodeURIComponent(a).toLowerCase();if(0===b.toLowerCase().indexOf(a))return b;if(c)for(b=0;b<c.length;b++)if(0===c[b].toLowerCase().indexOf(a))return c[b]}function evalScripts(a){a=a.getElementsByTagName("script");for(let b=0;b<a.length;b++)eval(a[b].innerHTML)}
function outputTabView(a,b,c,d){function e(f){if(!f.attr("loaded")){let h=f.attr("uri");h&&$j.ajax(h,{dataType:"html",success:function(k){f.attr("loaded",!0);f.html(k);evalScripts(f[0]);addTooltips(f[0])},error:function(k){f.html("Tab load failed.<p>"+k);f.attr("loaded",null)}})}}let g=$j("#"+a);b.forEach(function(f,h){let k=$j("#"+f.id);k.attr("index",h);f.uri&&k.attr("uri",f.uri);f.autoloadP&&e(k)});a={active:document.location.hash&&g.find('div[id="'+document.location.hash.substring(1)+'"]').attr("index")||
c,beforeActivate:function(f,h){f=h.newPanel.attr("id");e(h.newPanel);history.replaceState({tab:f},f,document.location.pathname+document.location.search+"#"+f)},create:function(f,h){e(h.panel);g.css("visibility","visible")}};if(d){function f(){g.find("div.tabPanel").each(function(){e($j(this))})}g.on("tabsactivate",function(h,k){k.newPanel.attr("id")==d&&(f(),g.find("div.tabPanel").css("display","block"),k.newPanel.css("display","none"))});g.on("tabscreate",function(h,k){k.panel.attr("id")==d&&(f(),
g.find("div.tabPanel").css("display","block"),k.panel.css("display","none"))});g.on("tabsbeforeactivate",function(h,k){g.find("div.tabPanel").css("display","none")})}g.tabs(a)}function SVGInit(){var a=YAHOO.util.Dom.getElementsByClassName("psvg"),b=getTypeObjectPage().type,c=!0;"reaction"==stringTypeToType(b)&&(c=!1);for(b=0;b<a.length;b++)hasClassName(a[b],"gsvg")?SVGShrinkToFit(a[b],5,5,!1):SVGShrinkToFit(a[b],20,20,c)}
function SVGShrinkToFit(a,b,c,d){var e=a.getSVGDocument();if(null==e)setTimeout(function(){SVGShrinkToFit(a,b,c,d)},250);else if(e=e.documentElement.getBBox(),0==e.height)setTimeout(function(){SVGShrinkToFit(a,b,c,d)},250);else{var g=get_browser_window_size()[0];a.height=e.height+b;a.width=e.width+c;e=(g-a.width)/2;d&&0<e&&YAHOO.util.Dom.setStyle(a,"margin-left",e+"px")}}function hasClassName(a,b){if(a.className){a=a.className.split(" ");for(var c=0;c<a.length;c++)if(a[c]==b)return!0}return!1}
function popupVideo(a,b){$("msgPopup").innerHTML="";var c=new YAHOO.widget.Panel("msgPopup",{width:"600px",height:"400px",constraintoviewport:!0,fixedcenter:!0,underlay:"shadow",close:!0,zindex:2E3});c.setHeader(b);c.setBody("<iframe type=text/html class='video' frameborder=0 src='"+a+"'/>");c.render();return c}function getSpeciesComparisonFormData(){var a=document.getElementById("flag").value;handleCelSpeciesComparison(a)}
function handleCelSpeciesComparison(a){celDialogSpeciesComparison.hide();onMultiorgSelectorOK.subscribe(function(){celHighlightSpeciesComparison(a)});multiorg_unavailableOrgids=["META",orgID()];showMultiorgChooser()}function celHighlightSpeciesComparison(a){var b=getOrglistArray();celOverviewhighlightSpeciesComparison(a,function(c){celHighlight("Species Comparison '"+b+"'",c,b.join("*"),a)});onMultiorgSelectorOK.unsubscribeAll()}
function celOverviewhighlightSpeciesComparison(a,b,c){var d=initCelOverview.orgid,e=WG.GetCurrentZoomLevel();c||(c=getOrglistArray().join("*"));a="/"+d+"/cel-overview-species-compare?zoomlevel="+e+"&object="+encodeURIComponent(c)+"&type="+a;getRequestAsync(a,b)}
function possiblyShowHint(a,b,c){function d(){let f=$j("<div id='hint'/>");if(b.text)f.html(b.text);else if(b.url)$j.get(b.url,function(l){f.html(l)});else return;var h=[{text:"Close",click:function(){$j(this).dialog("close");e()}}];let k;(null==(k=userInfo)?0:k.id)&&h.push({text:"Don't show me this again",click:function(){$j(this).dialog("close");e(!0)}});h={buttons:h,dialogClass:"noClose hintTitlebar"};b.width&&(h.width=b.width);b.height&&(h.height=b.height);b.minWidth&&(h.minWidth=b.minWidth);
b.minHeight&&(h.minHeight=b.minHeight);h.maxWidth=b.maxWidth||.9*window.innerWidth;h.maxHeight=b.maxHeight||.9*window.innerHeight;b.position&&(h.position=b.position);f.dialog(h)}function e(f){let h;if(null==(h=userInfo)?0:h.id)f&&(g.unsubscribe="T"),$j.get("/ajax-record-hint-view",g,null)}let g={hint:a};$j(document).ready(function(){let f;(null==(f=userInfo)?0:f.id)?(c&&(g.max=c),$j.get("/ajax-show-hint-p",g,function(h){h&&d()},"json")):d()})}
function possiblyShowTextHint(a,b,c,d){d=d?Object.assign({},d):{};d.text=b;possiblyShowHint(a,d,c)}function possiblyShowUrlHint(a,b,c,d,e,g){g=g?Object.assign({},g):{};c&&(g.width=c);d&&(g.width=d);g.url=b;possiblyShowHint(a,g,e)}
function addTooltips(a){if("function"==typeof tippy){var b={allowHTML:!0,interactive:!0,duration:0,theme:"ptools",offset:[0,5],delay:[100,0],followCursor:"horizontal",placement:"bottom-start",plugins:[hideOnEsc]};a?(a.getAttribute("data-tippy-content")&&tippy(a,b),tippy(a.querySelectorAll("[data-tippy-content]"),b)):tippy("[data-tippy-content]",b)}}
function popupUrlContent(a,b,c,d,e){let g=$j("<div class='clickPopup'/>");$j.get(a,function(f){g.html(f)});a={width:b,height:c,title:d};e&&(a.position={my:"top",at:"bottom",of:e});g.dialog(a)}const hideOnEsc={name:"hideOnEsc",defaultValue:!0,fn({hide:a}){function b(c){27===c.keyCode&&a()}return{onShow(){document.addEventListener("keydown",b)},onHide(){document.removeEventListener("keydown",b)}}}};let editMode={enabled:!1,contextMenuFn:null};
function openModalMsgDialog(a,b){$j("#modalMsg")[0]?$j("#modalMsg").html(a).dialog("option","buttons",b).dialog("open"):$j("<div id='modalMsg'></div>").html(a).dialog({dialogClass:"noClose",modal:!0,buttons:b})}function closeModalMsgDialog(){$j("#modalMsg").dialog("close")}
function getFrameIdFromAnchor(a){if(a.hostname==document.location.hostname){a=a.href.split("?");let b,c;if(1<a.length){let d=a[1].split("&");for(a=0;a<d.length;a++){let e=d[a].split("=");if("object"!=e[0].toLowerCase()&&"id"!=e[0].toLowerCase()||"NIL"==e[1])"type"==e[0]?b=e[1]:"chromosome"==e[0]&&(c=e[1]);else return decodeURIComponent(e[1])}if("LOCUS-POSITION"==b)return decodeURIComponent(c)}}}
function getFrameIdFromURLString(a){if("http"!=a.slice(0,4)&&(a=a.split("?"),1<a.length)){let b=a[1].split("&");for(a=0;a<b.length;a++){let c=b[a].split("=");if("object"==c[0].toLowerCase()||"id"==c[0].toLowerCase())return decodeURIComponent(c[1])}}}function getEltTtip(a){a=$j(a);let b=a.prop("title")||a.attr("data-tippy-content");if(b)return b;if(a=a.prop("onmouseover"))return(a=a.toString().match(/return overlib\('(.+)'/im))&&a[1]}
function getFrameIdFromTtip(a){if(a){let b=a.match(/ID:<\/b> ([A-Za-z0-9-_:]+)/m);if(b)return b[1];if(a=a.match(/(?:PMID|PubMed): ([0-9]+)/m))return"PUB-"+a[1]}}function frameidInPopup(a,b,c,d){a.getAttribute("data-tippy-content")||tippy(a,{content:b,interactive:!0,trigger:"manual",showOnCreate:!0,getReferenceClientRect:c&&d?function(){return{width:0,height:0,top:d,bottom:d,left:c,right:c}}:null})}
function addLinkFrameidContextMenus(){$j("body").on("contextmenu","a",function(a){if(a.ctrlKey||editMode.enabled){let b=getFrameIdFromTtip(getEltTtip(this))||getFrameIdFromAnchor(this);if(b)return a.preventDefault(),editMode.enabled&&editMode.contextMenuFn?editMode.contextMenuFn(this,b):frameidInPopup(this,b),!1}})}
function startEditSession(a){event.preventDefault();document.body.style.cursor="progress";openModalMsgDialog("Please wait while your session is being established.");$j.ajax("/ajax-start-edit-session",{dataType:"json",data:a?{testOnly:!0}:null,success:function(b){b&&b.success?location.reload():(document.body.style.cursor="default",closeModalMsgDialog(),alert(b.msg||"An editing session could not be started at this time."))},error:function(b,c,d){document.body.style.cursor="default";closeModalMsgDialog();
alert("An editing session could not be started at this time.");console.log(c+" "+d)}});return!1}
function refreshKB(){event.preventDefault();document.body.style.cursor="progress";$j.ajax("/ajax-refresh-kb",{dataType:"json",success:function(a){(null==a?0:a.success)?location.reload():"modified"==(null==a?void 0:a.error)?alert("This database cannot be refreshed because it has been modified. You must save or revert first."):"unauthorized"==(null==a?void 0:a.error)?alert("You must be logged in as an authorized editor to perform this operation."):alert("Refresh failed.")}});return!1}
function getMenuItems(a){let b=$j(a);return b.find("[role='menuitem']:not('.removedLink')").filter(function(){return $j(this).closest("[role='menu'],[role='menubar']").is(b)})}
function initToolbarMenuKeyboardOps(a,b){function c(l){var m=l.key;let p=!1;var n=$j(document.activeElement);if(n=n.data("nav")||n.closest("[role='menuitem']").data("nav")){switch(m){case " ":case "Enter":n.enter&&(n.enter.focus(),p=!0);break;case "Esc":case "Escape":n.exit&&(n.exit.focus(),p=!0);break;case "Up":case "ArrowUp":d&&n.exit?(n.exit.focus(),p=!0):n.prev&&(n.prev.focus(),p=!0);break;case "Down":case "ArrowDown":d?n.enter&&(n.enter.focus(),p=!0):n.next&&(n.next.focus(),p=!0);break;case "Left":case "ArrowLeft":!d&&
n.exit?(n.exit.focus(),p=!0):n.prev&&(n.prev.focus(),p=!0);break;case "Right":case "ArrowRight":d?n.next&&(n.next.focus(),p=!0):n.enter&&(n.enter.focus(),p=!0);break;default:if(printableCharP(m)){{n=(n.index+1)%f;m=m.toLocaleLowerCase();let q=g.indexOf(m,n||0);0>q&&n&&(q=g.indexOf(m));m=0<=q?$j(e[q]):!1}m&&(m.focus(),p=!0)}}p&&(l.stopPropagation(),l.preventDefault())}}let d="menubar"==$j(a).attr("role"),e=getMenuItems(a),g=[],f=e.length,h;b&&(h=b.children("button"));var k;null!=(k=h)&&k.length||(h=
a,a.attr("tabIndex",0),a.data("nav",{index:0,next:$j(e[0]),prev:$j(e[f-1]),enter:$j(e[0])}),a.keydown(c));for(a=0;a<f;a++){b=$j(e[a]);k=(a+1)%f;let l=(a-1+f)%f,m=b.children("[role='menu']"),p={index:a,exit:h};m.length&&(p.enter=initToolbarMenuKeyboardOps(m,b));1<f&&(p.prev=$j(e[l]),p.next=$j(e[k]));b.prop("tabIndex",-1);b.children("button").prop("tabIndex",-1);b.data("nav",p);g.push(b.text().trim()[0].toLocaleLowerCase());b.keydown(c)}if(e.length)return $j(e[0])}
function printableCharP(a){return 1===a.length&&a.match(/\S/)}function cloneStyleSheetIntoShadowDOM(a){const b=document.styleSheets;for(let c=0;c<b.length;c++){const d=b[c];if(!d.href||!sameOrigin(d.href))continue;const e=document.createElement("style");a.appendChild(e);fetch(d.href).then(g=>g.text()).then(g=>{e.textContent=g}).catch(g=>{console.error("Failed to fetch stylesheet:",g)})}}
function sameOrigin(a){const b=document.createElement("a");b.href=a;return b.hostname===window.location.hostname&&b.port===window.location.port&&b.protocol===window.location.protocol}let openShadowRoots=[];
function templateToWebComponent(a){customElements.define(a,class extends HTMLElement{static get observedAttributes(){return["class"]}constructor(){super();let b=document.createElement("span");this.getAttributeNames().forEach(e=>b.setAttribute(e,this.getAttribute(e)));let c=document.getElementById(a).content;const d=this.attachShadow({mode:"open"});b.appendChild(c.cloneNode(!0));d.appendChild(b);cloneStyleSheetIntoShadowDOM(d);openShadowRoots.push(d)}attributeChangedCallback(b,c,d){this.shadowRoot.children[0].setAttribute(b,
d)}})}function templateToCustomElement(a){customElements.define(a,class extends HTMLElement{connectedCallback(){let b=document.getElementById(this.nodeName);this.append(b.content.cloneNode(!0))}})}function findElement(a){let b=document.querySelector(a);if(b)return b;for(let c=0;c<openShadowRoots.length;c++)if(b=openShadowRoots[c].querySelector(a))return b}
function findAllElements(a){let b=document.querySelectorAll(a);for(let c=0;c<openShadowRoots.length;c++){let d=openShadowRoots[c].querySelectorAll(a);d.length&&(b=[...b,...d])}return b};
